<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>绿色可降解衣物商城 - 环保时尚生活</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .header {
            background: linear-gradient(135deg, #0fde00, #1da013);
            color: white;
            padding: 0.5rem 1rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .logo i {
            margin-right: 0.5rem;
        }
        
        .search-bar {
            flex: 1;
            max-width: 500px;
            margin: 0 2rem;
            position: relative;
        }
        
        .search-bar input {
            width: 100%;
            padding: 0.7rem 4rem 0.7rem 1rem;
            border: none;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .points-badge {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .points-badge i {
            font-size: 1.2rem;
        }
        
        .recycling-button {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .recycling-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(245, 87, 108, 0.4);
        }
        
        .header-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .header-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .main-container {
            max-width: 1200px;
            margin: 1rem auto;
            padding: 0 1rem;
        }
        
        .banner {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .banner::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            animation: rotate 10s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .banner h2 {
            font-size: 2rem;
            color: #2e7d32;
            margin-bottom: 0.5rem;
            position: relative;
        }
        
        .banner p {
            color: #666;
            font-size: 1.1rem;
            position: relative;
        }
        
        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            padding: 0.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .tab-item {
            flex: 1;
            text-align: center;
            padding: 0.8rem;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .tab-item.active {
            background: #0fde00;
            color: white;
            box-shadow: 0 2px 8px rgba(15, 222, 0, 0.3);
        }
        
        .tab-item:hover:not(.active) {
            background: #f8f9fa;
            transform: translateY(-2px);
        }
        
        .tab-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .tab-item:hover::before {
            left: 100%;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-image img {
            transition: transform 0.5s ease;
        }
        
        .product-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            z-index: 10;
        }
        
        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #999;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .favorite-btn:hover {
            transform: scale(1.1);
        }
        
        .favorite-btn.favorited {
            color: #ff6b6b;
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-info {
            padding: 1.2rem;
        }
        
        .product-title {
            font-size: 1rem;
            margin-bottom: 0.6rem;
            color: #333;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #0fde00;
            margin-bottom: 0.6rem;
        }
        
        .product-points {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.6rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .buy-button {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: 0.7rem;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .buy-button:hover {
            background: linear-gradient(135deg,#0fde00, #0fde00);
            transform: scale(1.02);
        }
        
        .ai-try-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            margin-top: 0.6rem;
        }
        
        .ai-try-button:hover {
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
            transform: scale(1.02);
        }
        
        .button-group {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.6rem;
        }
        
        .button-group button {
            flex: 1;
        }
        
        .eco-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.6rem;
            margin-bottom: 0.6rem;
        }
        
        .eco-tag {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            color: #2e7d32;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            flex: 1;
            min-width: 120px;
            text-align: center;
        }
        
        .eco-detail-button {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 0.6rem;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            margin-top: 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
        }
        
        .eco-detail-button:hover {
            background: linear-gradient(135deg, #45a049, #388e3c);
            transform: scale(1.02);
        }
        
        .traceability-badge {
            position: absolute;
            top: 10px;
            right: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }
        
        .traceability-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.6rem;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            margin-top: 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
        }
        
        .traceability-button:hover {
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
            transform: scale(1.02);
        }
        
        /* 订单历史和收藏列表模态框样式 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .modal-overlay.open {
            display: flex;
        }
        
        .history-modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        .history-modal-header {
            padding: 1.2rem 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }
        
        .history-modal-header h3 {
            margin: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .close-history-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            line-height: 1;
        }
        
        .history-modal-content {
            padding: 1.5rem;
        }
        
        .empty-history {
            text-align: center;
            padding: 3rem 1rem;
            color: #999;
        }
        
        .empty-history i {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }
        
        .order-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.2rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid #eee;
        }
        
        .order-id {
            font-weight: bold;
            color: #333;
            font-size: 0.95rem;
        }
        
        .order-time {
            color: #999;
            font-size: 0.85rem;
        }
        
        .order-items-list {
            margin-bottom: 0.8rem;
        }
        
        .order-product-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.5rem 0;
        }
        
        .order-product-image {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            object-fit: cover;
            background: #f0f0f0;
        }
        
        .order-product-info {
            flex: 1;
        }
        
        .order-product-name {
            font-size: 0.9rem;
            color: #333;
        }
        
        .order-product-quantity {
            color: #666;
            font-size: 0.85rem;
        }
        
        .order-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .order-points {
            color: #4CAF50;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .order-total {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
        }
        
        .order-total span {
            color: #ff6b6b;
        }
        
        .favorite-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 1rem;
            align-items: center;
        }
        
        .favorite-item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            background: #f0f0f0;
            flex-shrink: 0;
        }
        
        .favorite-item-info {
            flex: 1;
            min-width: 0;
        }
        
        .favorite-item-name {
            font-size: 1rem;
            color: #333;
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .favorite-item-price {
            font-size: 1.1rem;
            font-weight: bold;
            color: #0fde00;
            margin-bottom: 0.5rem;
        }
        
        .favorite-item-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .favorite-action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .favorite-add-cart {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
        }
        
        .favorite-add-cart:hover {
            transform: scale(1.02);
        }
        
        .favorite-remove {
            background: #f0f0f0;
            color: #666;
        }
        
        .favorite-remove:hover {
            background: #e0e0e0;
        }
        
        /* 区块链溯源模态框样式 */
        .traceability-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .traceability-overlay.open {
            display: flex;
        }
        
        .traceability-modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 750px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        .traceability-modal-header {
            padding: 1.2rem 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }
        
        .traceability-modal-header h3 {
            margin: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .close-traceability-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            line-height: 1;
        }
        
        .traceability-modal-content {
            padding: 1.5rem;
        }
        
        .traceability-section {
            margin-bottom: 1.8rem;
        }
        
        .traceability-section-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #667eea;
        }
        
        .traceability-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .traceability-info-item {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .traceability-info-label {
            font-weight: bold;
            color: #555;
            margin-bottom: 0.3rem;
            font-size: 0.85rem;
        }
        
        .traceability-info-value {
            color: #333;
            font-size: 0.95rem;
        }
        
        /* 生产流程时间线 */
        .production-timeline {
            position: relative;
            padding-left: 2rem;
        }
        
        .production-timeline::before {
            content: '';
            position: absolute;
            left: 0.6rem;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.4rem;
            top: 1.2rem;
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
        }
        
        .timeline-stage {
            font-weight: bold;
            color: #667eea;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .timeline-date {
            font-size: 0.85rem;
            color: #999;
            margin-bottom: 0.5rem;
        }
        
        .timeline-operator {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.5rem;
        }
        
        .timeline-details {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.6;
        }
        
        /* 检测报告 */
        .inspection-report {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.2rem;
            border-radius: 8px;
        }
        
        .inspection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid #dee2e6;
        }
        
        .inspection-agency {
            font-weight: bold;
            color: #333;
            font-size: 0.95rem;
        }
        
        .inspection-result {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            background: #4CAF50;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .inspection-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 0.8rem;
        }
        
        .inspection-item {
            background: white;
            padding: 0.8rem;
            border-radius: 6px;
            font-size: 0.9rem;
            color: #555;
        }
        
        .inspection-item span {
            font-weight: bold;
            color: #333;
        }
        
        /* 区块链信息 */
        .blockchain-info {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 1.2rem;
            border-radius: 8px;
            color: white;
        }
        
        .blockchain-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.6rem;
            font-size: 0.9rem;
        }
        
        .blockchain-row:last-child {
            margin-bottom: 0;
        }
        
        .blockchain-label {
            opacity: 0.9;
        }
        
        .blockchain-value {
            font-family: monospace;
            font-size: 0.85rem;
            opacity: 0.95;
            word-break: break-all;
            text-align: right;
            max-width: 60%;
        }
        
        /* 筛选和排序区域样式 */
        .filter-section {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .filter-row:last-child {
            margin-bottom: 0;
        }

        .filter-label {
            font-weight: bold;
            color: #333;
            min-width: 80px;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .filter-btn:hover {
            border-color: #0fde00;
            color: #0fde00;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #0fde00, #1da013);
            color: white;
            border-color: transparent;
        }

        .price-range {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .price-range input {
            width: 100px;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .price-range button {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #0fde00, #1da013);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .sort-select {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            background: white;
        }

        /* 产品详情模态框样式 */
        .product-detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .product-detail-overlay.open {
            display: flex;
        }

        .product-detail-modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .product-detail-header {
            padding: 1.2rem 1.5rem;
            background: linear-gradient(135deg, #0fde00, #1da013);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }

        .product-detail-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .close-product-detail {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            line-height: 1;
        }

        .product-detail-content {
            padding: 1.5rem;
        }

        .product-detail-main {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .product-detail-image {
            width: 100%;
            height: 400px;
            background: #f8f9fa;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-detail-info {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .product-detail-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .product-detail-price {
            font-size: 2rem;
            font-weight: bold;
            color: #0fde00;
        }

        .product-detail-points {
            color: #666;
            font-size: 1rem;
        }

        .detail-section-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 0.8rem;
            font-size: 1rem;
        }

        .size-options,
        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .size-option,
        .color-option {
            padding: 0.6rem 1.2rem;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .size-option:hover,
        .color-option:hover {
            border-color: #0fde00;
        }

        .size-option.selected,
        .color-option.selected {
            border-color: #0fde00;
            background: linear-gradient(135deg, #0fde00, #1da013);
            color: white;
        }

        .color-option {
            width: 40px;
            height: 40px;
            padding: 0;
            border-radius: 50%;
            position: relative;
        }

        .color-option.selected::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.2rem;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quantity-selector button {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .quantity-selector button:hover {
            background: #f0f0f0;
        }

        .quantity-selector input {
            width: 60px;
            height: 40px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }

        .stock-info {
            padding: 0.8rem;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .stock-info.in-stock {
            color: #4CAF50;
            border-left: 4px solid #4CAF50;
        }

        .stock-info.low-stock {
            color: #ff9800;
            border-left: 4px solid #ff9800;
        }

        .stock-info.out-of-stock {
            color: #f44336;
            border-left: 4px solid #f44336;
        }

        .detail-action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .detail-action-buttons button {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-cart-detail {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
        }

        .add-cart-detail:hover {
            transform: scale(1.02);
        }

        .buy-now-detail {
            background: linear-gradient(135deg, #0fde00, #1da013);
            color: white;
        }

        .buy-now-detail:hover {
            transform: scale(1.02);
        }

        .product-description {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .product-detail-main {
                grid-template-columns: 1fr;
            }
            
            .filter-row {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        .cart-section {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .section-title {
            font-size: 1.3rem;
            color: #2e7d32;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #eee;
        }
        
        .redemption-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .redeem-option {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.2rem;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            transition: all 0.3s ease;
        }
        
        .redeem-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .redeem-title {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .redeem-desc {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .redeem-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .redeem-button:hover {
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
        }
        
        .footer {
            background: white;
            margin-top: 2rem;
            color: #666;
            border-top: 1px solid #eee;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .footer-top {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #eee;
        }
        
        .footer-section h4 {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #0fde00;
            display: inline-block;
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section li {
            margin-bottom: 0.5rem;
        }
        
        .footer-section a {
            color: #666;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-section a:hover {
            color: #0fde00;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #eee;
        }
        
        .footer-bottom p {
            margin-bottom: 0.5rem;
        }
        
        .footer-bottom p:last-child {
            margin-bottom: 0;
        }
        
        .social-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .qrcode-container {
            display: flex;
            gap: 2rem;
            margin-top: 1rem;
        }
        
        .qrcode-item {
            text-align: center;
        }
        
        .qrcode-item img {
            width: 120px;
            height: 120px;
            margin-bottom: 0.5rem;
            border: 1px solid #eee;
            padding: 0.5rem;
        }
        
        .qrcode-item p {
            font-size: 0.9rem;
            color: #666;
        }
        
        .team-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1rem 0;
        }
        
        .team-logo img {
            width: 80px;
            height: 80px;
        }
        
        .social-icons {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            background: #0fde00;
            color: white;
            transform: translateY(-3px);
        }
        
        @media (max-width: 768px) {
            .footer-top {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .qrcode-container {
                flex-direction: column;
                gap: 1rem;
            }
        }
        
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            min-width: 250px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .floating-cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 100;
        }
        
        .cart-modal {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }
        
        .cart-modal.open {
            right: 0;
        }
        
        .cart-header {
            padding: 1rem;
            background: #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
        }
        
        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        .cart-items {
            padding: 1rem;
        }
        
        .cart-header-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .select-all-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
            color: #666;
        }
        
        .select-all-label input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .clear-cart-btn {
            background: none;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            transition: color 0.3s ease;
        }
        
        .clear-cart-btn:hover {
            color: #ff4757;
        }
        
        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
            align-items: center;
        }
        
        .cart-item-unselected {
            opacity: 0.6;
        }
        
        .cart-item-checkbox {
            display: flex;
            align-items: center;
        }
        
        .cart-item-checkbox input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .cart-item-info {
            flex: 1;
            min-width: 0;
        }
        
        .cart-item-title {
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .cart-item-price {
            color:#0fde00;
            font-weight: bold;
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .quantity-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .quantity-btn:hover {
            background: #f0f0f0;
            border-color: #ccc;
        }
        
        .quantity-value {
            min-width: 30px;
            text-align: center;
            font-size: 1rem;
            font-weight: 500;
        }
        
        .cart-item-subtotal {
            text-align: right;
            min-width: 80px;
        }
        
        .subtotal-label {
            font-size: 0.8rem;
            color: #999;
        }
        
        .subtotal-value {
            font-size: 1rem;
            font-weight: bold;
            color: #333;
        }
        
        .remove-item {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0.3rem;
            transition: color 0.3s ease;
        }
        
        .remove-item:hover {
            color: #ff6b6b;
        }
        
        .cart-total {
            padding: 1rem;
            background: #f8f9fa;
            border-top: 1px solid #eee;
            text-align: right;
        }

        .cart-discount-section {
            padding: 1rem;
            background: #fff9c4;
            border-top: 1px solid #ffe082;
        }

        .coupon-input-wrapper {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
        }

        .coupon-input {
            flex: 1;
            padding: 0.6rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .coupon-btn {
            padding: 0.6rem 1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .coupon-btn:hover {
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
        }

        .applied-coupon {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #e8f5e9;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            margin-bottom: 0.8rem;
        }

        .applied-coupon span {
            color: #2e7d32;
            font-weight: bold;
        }

        .remove-coupon-btn {
            background: none;
            border: none;
            color: #f44336;
            cursor: pointer;
            font-size: 1rem;
        }

        .cost-breakdown {
            padding: 0.5rem 0;
        }

        .cost-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .cost-row.total {
            font-size: 1.2rem;
            font-weight: bold;
            padding-top: 0.5rem;
            border-top: 2px solid #ddd;
            margin-top: 0.5rem;
        }

        .cost-label {
            color: #666;
        }

        .cost-value {
            color: #333;
        }

        .cost-value.discount {
            color: #f44336;
        }

        .cost-value.total {
            color: #0fde00;
        }

        .checkout-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            margin-top: 0.5rem;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #0fde00;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        /* 环保详情模态框样式 */
        .eco-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .eco-modal-overlay.open {
            display: flex;
        }
        
        .eco-modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        .eco-modal-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }
        
        .eco-modal-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }
        
        .close-eco-modal {
            background: none;
            border: none;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            line-height: 1;
        }
        
        .eco-modal-content {
            padding: 1.5rem;
        }
        
        .eco-section {
            margin-bottom: 1.5rem;
        }
        
        .eco-section-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .eco-section-title i {
            color: #4CAF50;
        }
        
        .eco-info-item {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.8rem;
            border-left: 4px solid #4CAF50;
        }
        
        .eco-info-label {
            font-weight: bold;
            color: #555;
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }
        
        .eco-info-value {
            color: #333;
            font-size: 1rem;
        }
        
        .eco-certifications {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .eco-certification {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            color: #2e7d32;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .eco-craft-detail {
            background: linear-gradient(135deg, #f1f8e9, #dcedc8);
            padding: 1.2rem;
            border-radius: 8px;
            line-height: 1.8;
            color: #333;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .search-bar {
                max-width: 100%;
                margin: 1rem 0;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 1rem;
            }
            
            .banner {
                padding: 1rem;
            }
            
            .banner h2 {
                font-size: 1.5rem;
            }
            
            .cart-modal {
                width: 100%;
                right: -100%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <span>绿韵智衣</span>
            </div>
            
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="搜索环保衣物..." onkeyup="handleSearchKey(event)">
                <button class="search-btn" onclick="searchProducts()">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <div class="user-info">
                <div class="points-badge">
                    <i class="fas fa-seedling"></i>
                    <span>积分: <span id="totalPoints">0</span></span>
                </div>
                <div class="points-badge" style="background: linear-gradient(135deg, #2196F3, #21CBF3);">
                    <i class="fas fa-yen-sign"></i>
                    <span>抵扣: ¥<span id="totalCredit">0.00</span></span>
                </div>
                <button class="header-btn" onclick="showOrderHistory()">
                    <i class="fas fa-history"></i>
                    订单
                </button>
                <button class="header-btn" onclick="showFavorites()">
                    <i class="fas fa-heart"></i>
                    收藏
                </button>
                <button class="recycling-button" onclick="goToRecycling()">
                    <i class="fas fa-recycle"></i>
                    旧衣回收
                </button>
                <div style="position: relative; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-shopping-cart" id="cartIcon" style="font-size: 1.5rem; color: white; cursor: pointer;"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-user-circle" style="font-size: 1.5rem; color: white;"></i>
                </div>
            </div>
        </div>
    </div>
    
    <div class="main-container">
        <div class="banner">
            <h2>🌱 绿色生活，从衣开始</h2>
            <p>选择可降解衣物，为地球贡献一份力量</p>
        </div>
        
        <div class="nav-tabs">
            <div class="tab-item active">推荐商品</div>
            <div class="tab-item">新品上架</div>
            <div class="tab-item">热销榜单</div>
            <div class="tab-item">积分专区</div>
        </div>
        
        <div class="filter-section">
            <div class="filter-row">
                <span class="filter-label">分类筛选:</span>
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterByCategory('all', this)">全部</button>
                    <button class="filter-btn" onclick="filterByCategory('t-shirt', this)">T恤</button>
                    <button class="filter-btn" onclick="filterByCategory('pants', this)">裤子</button>
                    <button class="filter-btn" onclick="filterByCategory('dress', this)">连衣裙</button>
                    <button class="filter-btn" onclick="filterByCategory('jacket', this)">外套</button>
                    <button class="filter-btn" onclick="filterByCategory('underwear', this)">内衣</button>
                    <button class="filter-btn" onclick="filterByCategory('socks', this)">袜子</button>
                    <button class="filter-btn" onclick="filterByCategory('accessories', this)">配件</button>
                </div>
            </div>
            <div class="filter-row">
                <span class="filter-label">价格区间:</span>
                <div class="price-range">
                    <input type="number" id="priceMin" placeholder="最低价" min="0">
                    <span>-</span>
                    <input type="number" id="priceMax" placeholder="最高价" min="0">
                    <button onclick="filterByPrice()">确定</button>
                    <button class="filter-btn" onclick="resetPriceFilter()">重置</button>
                </div>
            </div>
            <div class="filter-row">
                <span class="filter-label">排序方式:</span>
                <select class="sort-select" id="sortSelect" onchange="sortProducts()">
                    <option value="default">默认排序</option>
                    <option value="price-asc">价格从低到高</option>
                    <option value="price-desc">价格从高到低</option>
                    <option value="sales-desc">销量从高到低</option>
                    <option value="points-desc">积分从高到低</option>
                </select>
            </div>
        </div>
        
        <div class="products-grid" id="productsGrid">
            <!-- 产品卡片将通过JavaScript动态生成 -->
        </div>
        
        <div class="cart-section">
            <h3 class="section-title">积分兑换中心</h3>
            <p style="color: #666; margin-bottom: 1rem;">使用碳足迹积分兑换优惠券或抵扣金额</p>
            
            <div class="redemption-options">
                <div class="redeem-option">
                    <h4 class="redeem-title"><i class="fas fa-ticket-alt"></i> 优惠券兑换</h4>
                    <p class="redeem-desc">100积分 = ¥10优惠券</p>
                    <button class="redeem-button" onclick="redeemVoucher()">
                        <i class="fas fa-exchange-alt"></i> 立即兑换
                    </button>
                </div>
                
                <div class="redeem-option">
                    <h4 class="redeem-title"><i class="fas fa-money-bill-wave"></i> 现金抵扣</h4>
                    <p class="redeem-desc">200积分 = ¥20现金抵扣</p>
                    <button class="redeem-button" onclick="redeemCash()">
                        <i class="fas fa-exchange-alt"></i> 立即抵扣
                    </button>
                </div>
                
                <div class="redeem-option">
                    <h4 class="redeem-title"><i class="fas fa-gift"></i> 特殊兑换</h4>
                    <p class="redeem-desc">500积分 = 免费环保袋</p>
                    <button class="redeem-button" onclick="redeemBag()">
                        <i class="fas fa-exchange-alt"></i> 立即兑换
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h3>购物车 (<span id="modalCartCount">0</span>)</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- 购物车项目将通过JavaScript动态生成 -->
        </div>
        <div class="cart-discount-section" id="cartDiscountSection">
            <div id="couponArea">
                <div class="coupon-input-wrapper">
                    <input type="text" class="coupon-input" id="couponInput" placeholder="输入优惠券代码（例如：NEW10、SAVE20）">
                    <button class="coupon-btn" onclick="applyCoupon()">使用优惠券</button>
                </div>
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 0;">
                    <i class="fas fa-info-circle"></i> 可用优惠券：NEW10（满100减10）、SAVE20（满200减20）、GREEN30（满300减30）
                </p>
            </div>
        </div>
        <div class="cart-total" id="cartTotalSection">
            <!-- 费用明细将通过JavaScript动态生成 -->
        </div>
    </div>
    
    <!-- 环保详情模态框 -->
    <div class="eco-modal-overlay" id="ecoModalOverlay">
        <div class="eco-modal" id="ecoModal">
            <div class="eco-modal-header">
                <h3 id="ecoModalTitle">产品环保详情</h3>
                <button class="close-eco-modal" onclick="closeEcoModal()">&times;</button>
            </div>
            <div class="eco-modal-content" id="ecoModalContent">
                <!-- 环保详情内容将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <!-- 订单历史模态框 -->
    <div class="modal-overlay" id="orderHistoryOverlay">
        <div class="history-modal" id="orderHistoryModal">
            <div class="history-modal-header">
                <h3><i class="fas fa-history"></i> 订单历史</h3>
                <button class="close-history-modal" onclick="closeOrderHistory()">&times;</button>
            </div>
            <div class="history-modal-content" id="orderHistoryContent">
                <!-- 订单历史内容将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <!-- 收藏列表模态框 -->
    <div class="modal-overlay" id="favoritesOverlay">
        <div class="history-modal" id="favoritesModal">
            <div class="history-modal-header">
                <h3><i class="fas fa-heart"></i> 我的收藏</h3>
                <button class="close-history-modal" onclick="closeFavorites()">&times;</button>
            </div>
            <div class="history-modal-content" id="favoritesContent">
                <!-- 收藏列表内容将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <!-- 区块链溯源模态框 -->
    <div class="traceability-overlay" id="traceabilityOverlay">
        <div class="traceability-modal" id="traceabilityModal">
            <div class="traceability-modal-header">
                <h3 id="traceabilityModalTitle"><i class="fas fa-cube"></i> 区块链溯源</h3>
                <button class="close-traceability-modal" onclick="closeTraceability()">&times;</button>
            </div>
            <div class="traceability-modal-content" id="traceabilityModalContent">
                <!-- 溯源详情内容将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <!-- 产品详情模态框 -->
    <div class="product-detail-overlay" id="productDetailOverlay">
        <div class="product-detail-modal" id="productDetailModal">
            <div class="product-detail-header">
                <h3>产品详情</h3>
                <button class="close-product-detail" onclick="closeProductDetail()">&times;</button>
            </div>
            <div class="product-detail-content" id="productDetailContent">
                <!-- 产品详情内容将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <div class="footer">
        <div class="footer-content">
            <div class="footer-top">
                <div class="footer-section">
                    <h4>购物指南</h4>
                    <ul>
                        <li><a href="#">新手指南</a></li>
                        <li><a href="#">购物流程</a></li>
                        <li><a href="#">会员介绍</a></li>
                        <li><a href="#">常见问题</a></li>
                        <li><a href="#">联系客服</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>配送与售后</h4>
                    <ul>
                        <li><a href="#">配送方式</a></li>
                        <li><a href="#">退换货政策</a></li>
                        <li><a href="#">售后服务</a></li>
                        <li><a href="#">隐私政策</a></li>
                        <li><a href="#">用户协议</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>商家服务</h4>
                    <ul>
                        <li><a href="#">商家入驻</a></li>
                        <li><a href="#">商家中心</a></li>
                        <li><a href="#">营销工具</a></li>
                        <li><a href="#">物流服务</a></li>
                        <li><a href="#">商家学院</a></li>
                    </ul>
                </div>
                
                <div class="footer-section social-section">
                    <h4>关注我们</h4>
                    <div class="qrcode-container">
                        <div class="qrcode-item">
                            <img src="images/小程序码.jpg" alt="微信小程序">
                            <p>微信小程序</p>
                        </div>
                        <div class="qrcode-item">
                            <img src="images/微信图片_20260203123337_7_1.jpg" alt="微信公众号">
                            <p>微信公众号</p>
                        </div>
                    </div>
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-weixin"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-weibo"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-qq"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="team-logo">
                    <img src="images/111.jpg" alt="绿韵智衣团队">
                </div>
                <p>© 2024 绿韵智衣 - 让环保成为时尚 | 京ICP备12345678号</p>
                <p style="color: #999;">选择绿色可降解衣物，共同守护地球家园</p>
                <p style="color: #999; margin-top: 1rem;">客服热线：400-123-4567 | 工作时间：9:00-21:00</p>
            </div>
        </div>
    </div>
    
    <div class="floating-cart" title="购物车" id="floatingCart">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="floatingCartCount">0</span>
    </div>
    
    <div class="notification" id="notification"></div>

    <script>
        // 初始化数据
        let totalPoints = parseInt(localStorage.getItem('totalPoints') || '0');
        let totalCredit = parseFloat(localStorage.getItem('totalCredit') || '0.00');
        let cart = [];
        let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
        let orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
        let currentTabType = 'recommend';
        let currentProducts = [];
        let currentCategory = 'all';
        let priceMin = null;
        let priceMax = null;
        let currentSort = 'default';
        
        // 当前选中的产品详情状态
        let selectedProduct = null;
        let selectedSize = null;
        let selectedColor = null;
        let selectedQuantity = 1;
        
        // 购物车相关变量
        let appliedCoupon = null;
        const availableCoupons = {
            'NEW10': { minAmount: 100, discount: 10, name: '新用户专享券' },
            'SAVE20': { minAmount: 200, discount: 20, name: '满减优惠券' },
            'GREEN30': { minAmount: 300, discount: 30, name: '绿色环保券' }
        };
        
        // 产品数据 - 包含图片URL和环保指标
        const products = [
            {
                id: 1,
                name: "有机棉T恤—素衣归本",
                price: 89.90,
                points: 89,
                category: "t-shirt",
                stock: 156,
                sales: 1250,
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["#ffffff", "#000000", "#4CAF50", "#2196F3"],
                colorNames: ["白色", "黑色", "绿色", "蓝色"],
                image: "images/有机棉T恤—素衣归本.jpg",
                ecoData: {
                    material: "100% 有机棉",
                    carbonFootprint: "2.5 kg CO₂",
                    degradationCycle: "6-12 个月",
                    craft: "采用无农药有机种植，天然染料染色，零废水处理工艺，手工缝制保证品质",
                    certifications: ["GOTS有机认证", "OEKO-TEX标准100"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001234",
                    origin: {
                        location: "新疆阿克苏",
                        coordinates: "40.52°N, 80.26°E",
                        farmer: "新疆有机棉种植合作社",
                        plantingDate: "2023-04-15",
                        harvestDate: "2023-09-20"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "山东青岛",
                            date: "2023-10-05",
                            operator: "青岛纺织厂",
                            details: "清花、梳棉、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "江苏苏州",
                            date: "2023-10-18",
                            operator: "苏州织造有限公司",
                            details: "针织、染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江杭州",
                            date: "2023-11-02",
                            operator: "杭州制衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-10",
                        agency: "国家纺织制品质量监督检验中心",
                        reportId: "QT2023111000156",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.2",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4-5级",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-12 14:30:25",
                    previousHash: "0x7f83b1657ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200129d693",
                    currentHash: "0x9c22ff5f21f0b81b113e63f7db6da94fedef11b2119b408a8dfc6db674bf0"
                }
            },
            {
                id: 2,
                name: "竹纤维运动裤—竹韧轻行",
                price: 129.90,
                points: 129,
                category: "pants",
                stock: 89,
                sales: 680,
                sizes: ["M", "L", "XL", "XXL"],
                colors: ["#424242", "#757575", "#2e7d32"],
                colorNames: ["深灰", "浅灰", "绿色"],
                image: "images/竹纤维运动裤—竹韧轻行.jpg",
                ecoData: {
                    material: "70% 竹纤维 + 30% 有机棉",
                    carbonFootprint: "1.8 kg CO₂",
                    degradationCycle: "8-15 个月",
                    craft: "竹材采用可持续砍伐，物理法提取纤维，生物酶脱胶，低能耗针织工艺",
                    certifications: ["FSC森林认证", "碳足迹认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001235",
                    origin: {
                        location: "福建南平",
                        coordinates: "26.65°N, 118.17°E",
                        farmer: "福建竹海竹材种植基地",
                        plantingDate: "2020-03-20",
                        harvestDate: "2023-08-15"
                    },
                    production: [
                        {
                            stage: "竹材加工",
                            location: "福建福州",
                            date: "2023-08-25",
                            operator: "福州竹纤维厂",
                            details: "竹材破碎、蒸煮、制浆、纺丝"
                        },
                        {
                            stage: "面料织造",
                            location: "广东东莞",
                            date: "2023-09-10",
                            operator: "东莞针织厂",
                            details: "混纺、针织、生物酶整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "广东深圳",
                            date: "2023-09-28",
                            operator: "深圳制衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-10-05",
                        agency: "广东省纤维检验局",
                        reportId: "GD2023100500089",
                        items: [
                            "抗菌率: 99.9%",
                            "透气率: 优等",
                            "甲醛含量: 未检出",
                            "pH值: 6.5",
                            "纤维含量: 70%竹纤维, 30%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-08 10:15:32",
                    previousHash: "0x9c22ff5f21f0b81b113e63f7db6da94fedef11b2119b408a8dfc6db674bf0",
                    currentHash: "0x2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7a"
                }
            },
            {
                id: 3,
                name: "麻质连衣裙—素麻清风",
                price: 159.90,
                points: 159,
                category: "dress",
                stock: 45,
                sales: 850,
                sizes: ["S", "M", "L", "XL"],
                colors: ["#8d6e63", "#d7ccc8", "#a1887f"],
                colorNames: ["深麻色", "浅麻色", "中麻色"],
                image: "images/麻质连衣裙—素麻清风.jpg",
                ecoData: {
                    material: "100% 法国亚麻",
                    carbonFootprint: "3.2 kg CO₂",
                    degradationCycle: "5-10 个月",
                    craft: "法国诺曼底亚麻种植，传统沤麻工艺，植物染料，手工裁剪缝制",
                    certifications: ["欧洲亚麻认证", "有机纺织品认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001236",
                    origin: {
                        location: "法国诺曼底",
                        coordinates: "49.28°N, 0.72°W",
                        farmer: "法国亚麻种植合作社",
                        plantingDate: "2023-03-10",
                        harvestDate: "2023-08-05"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "法国里尔",
                            date: "2023-08-15",
                            operator: "里尔亚麻加工厂",
                            details: "雨露沤麻、剥麻、梳麻、纺纱"
                        },
                        {
                            stage: "面料织造",
                            location: "意大利米兰",
                            date: "2023-09-01",
                            operator: "米兰织造厂",
                            details: "机织、植物染料染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "上海",
                            date: "2023-09-20",
                            operator: "上海高级定制工坊",
                            details: "手工裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-09-28",
                        agency: "国际纺织品检验中心",
                        reportId: "IT2023092800047",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.8",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4级",
                            "纤维含量: 100%亚麻"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-01 09:15:20",
                    previousHash: "0x2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7a",
                    currentHash: "0xa948904f2f0f479b8f8197694b30184b0d2ed1c2a5930e829f66725169c5b9e"
                }
            },
            {
                id: 4,
                name: "再生聚酯外套—环造雅韵",
                price: 199.90,
                points: 199,
                category: "jacket",
                stock: 67,
                sales: 520,
                sizes: ["M", "L", "XL", "XXL"],
                colors: ["#212121", "#424242", "#1565c0"],
                colorNames: ["黑色", "深灰", "藏青"],
                image: "images/再生聚酯外套—环造雅韵.jpg",
                ecoData: {
                    material: "100% 再生聚酯纤维（来自回收塑料瓶）",
                    carbonFootprint: "4.5 kg CO₂（比原生聚酯减少65%）",
                    degradationCycle: "20-30 年",
                    craft: "回收PET塑料瓶清洗破碎，熔融纺丝，环保涂层，零废弃剪裁",
                    certifications: ["GRS全球回收标准", "碳抵消认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001237",
                    origin: {
                        location: "浙江台州",
                        coordinates: "28.67°N, 121.43°E",
                        farmer: "台州塑料回收基地",
                        plantingDate: "2022-06-01",
                        harvestDate: "2023-07-15"
                    },
                    production: [
                        {
                            stage: "原料回收",
                            location: "浙江台州",
                            date: "2023-07-20",
                            operator: "台州塑料回收处理中心",
                            details: "塑料瓶收集、分类、清洗、破碎"
                        },
                        {
                            stage: "纤维制造",
                            location: "江苏苏州",
                            date: "2023-08-10",
                            operator: "苏州再生纤维厂",
                            details: "熔融纺丝、拉伸、切断、打包"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江杭州",
                            date: "2023-09-05",
                            operator: "杭州户外服装制造厂",
                            details: "面料织造、裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-09-18",
                        agency: "中国纺织科学研究院",
                        reportId: "CT2023091800123",
                        items: [
                            "再生纤维含量: 100%",
                            "拉伸强度: 优等",
                            "甲醛含量: 未检出",
                            "pH值: 6.3",
                            "耐洗色牢度: 4-5级"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-09-22 16:45:10",
                    previousHash: "0xa948904f2f0f479b8f8197694b30184b0d2ed1c2a5930e829f66725169c5b9e",
                    currentHash: "0x3a5ebc357ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200129d693"
                }
            },
            {
                id: 5,
                name: "有机棉内衣套装—棉柔初心",
                price: 79.90,
                points: 79,
                category: "underwear",
                stock: 234,
                sales: 550,
                sizes: ["M", "L", "XL"],
                colors: ["#fff3e0", "#ffccbc", "#e0e0e0"],
                colorNames: ["肤色", "浅粉", "浅灰"],
                image: "images/有机棉内衣套装—棉柔初心.jpg",
                ecoData: {
                    material: "100% 新疆有机长绒棉",
                    carbonFootprint: "1.2 kg CO₂",
                    degradationCycle: "4-8 个月",
                    craft: "有机种植不使用化肥农药，天然植物染料，无荧光剂，精工细作",
                    certifications: ["GOTS有机认证", "亲肤认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001238",
                    origin: {
                        location: "新疆喀什",
                        coordinates: "39.47°N, 76.17°E",
                        farmer: "喀什有机长绒棉种植基地",
                        plantingDate: "2023-04-01",
                        harvestDate: "2023-09-10"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "新疆乌鲁木齐",
                            date: "2023-09-20",
                            operator: "乌鲁木齐纺织厂",
                            details: "清花、梳棉、精梳、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "浙江绍兴",
                            date: "2023-10-05",
                            operator: "绍兴针织厂",
                            details: "针织、植物染料染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "广东东莞",
                            date: "2023-10-25",
                            operator: "东莞内衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-02",
                        agency: "国家纺织品质量监督检验中心",
                        reportId: "QT2023110200078",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.0",
                            "荧光剂: 未检出",
                            "亲肤性: 优",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-05 10:30:00",
                    previousHash: "0x3a5ebc357ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200129d693",
                    currentHash: "0x4b5f16e78a23a5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f"
                }
            },
            {
                id: 6,
                name: "竹炭纤维袜子—竹素轻足",
                price: 29.90,
                points: 29,
                category: "socks",
                stock: 567,
                sales: 980,
                sizes: ["均码"],
                colors: ["#000000", "#ffffff", "#795548"],
                colorNames: ["黑色", "白色", "棕色"],
                image: "images/竹炭纤维袜子—竹素轻足.jpg",
                ecoData: {
                    material: "80% 竹炭纤维 + 20% 氨纶",
                    carbonFootprint: "0.5 kg CO₂",
                    degradationCycle: "6-12 个月",
                    craft: "竹材高温炭化，纳米级竹炭颗粒掺入纤维，抗菌整理，无缝织造",
                    certifications: ["抗菌认证", "环保纺织认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001239",
                    origin: {
                        location: "浙江安吉",
                        coordinates: "30.63°N, 119.69°E",
                        farmer: "安吉竹材种植基地",
                        plantingDate: "2021-03-15",
                        harvestDate: "2023-07-20"
                    },
                    production: [
                        {
                            stage: "竹材加工",
                            location: "浙江杭州",
                            date: "2023-08-01",
                            operator: "杭州竹炭纤维厂",
                            details: "竹材破碎、高温炭化、制浆、纺丝"
                        },
                        {
                            stage: "面料织造",
                            location: "浙江海宁",
                            date: "2023-08-18",
                            operator: "海宁袜子厂",
                            details: "混纺、抗菌整理、无缝织造"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江诸暨",
                            date: "2023-09-08",
                            operator: "诸暨袜子织造厂",
                            details: "缝头、定型、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-09-15",
                        agency: "浙江省纺织检验所",
                        reportId: "ZJ2023091500056",
                        items: [
                            "抗菌率: 99.9%",
                            "除臭率: 95%",
                            "甲醛含量: 未检出",
                            "pH值: 6.5",
                            "纤维含量: 80%竹炭纤维, 20%氨纶"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-09-18 14:20:45",
                    previousHash: "0x4b5f16e78a23a5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f",
                    currentHash: "0x5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f"
                }
            },
            {
                id: 7,
                name: "亚麻衬衫—清风织麻",
                price: 149.90,
                points: 149,
                category: "t-shirt",
                stock: 78,
                sales: 720,
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["#ffffff", "#f5f5f5", "#e0e0e0", "#8d6e63"],
                colorNames: ["白色", "米白", "浅灰", "麻色"],
                image: "images/亚麻衬衫—清风织麻.jpg",
                ecoData: {
                    material: "100% 比利时亚麻",
                    carbonFootprint: "2.8 kg CO₂",
                    degradationCycle: "5-10 个月",
                    craft: "比利时亚麻种植，雨露沤麻，植物染料，经典版型，手工缝制",
                    certifications: ["欧洲亚麻大师认证", "可持续时尚认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001240",
                    origin: {
                        location: "比利时弗拉芒",
                        coordinates: "51.21°N, 4.42°E",
                        farmer: "比利时亚麻种植协会",
                        plantingDate: "2023-03-20",
                        harvestDate: "2023-08-10"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "比利时根特",
                            date: "2023-08-20",
                            operator: "根特亚麻加工厂",
                            details: "雨露沤麻、剥麻、梳麻、纺纱"
                        },
                        {
                            stage: "面料织造",
                            location: "意大利佛罗伦萨",
                            date: "2023-09-08",
                            operator: "佛罗伦萨织造厂",
                            details: "机织、植物染料染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "江苏苏州",
                            date: "2023-09-28",
                            operator: "苏州衬衫厂",
                            details: "手工裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-10-05",
                        agency: "欧洲纺织品检验中心",
                        reportId: "EU2023100500092",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.7",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4级",
                            "纤维含量: 100%亚麻"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-08 11:45:30",
                    previousHash: "0x5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f",
                    currentHash: "0x6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b"
                }
            },
            {
                id: 8,
                name: "可降解泳装—素浪锦裁",
                price: 189.90,
                points: 189,
                category: "accessories",
                stock: 34,
                sales: 420,
                sizes: ["S", "M", "L", "XL"],
                colors: ["#00bcd4", "#2196f3", "#9c27b0", "#e91e63"],
                colorNames: ["青色", "蓝色", "紫色", "粉色"],
                image: "images/可降解泳装—素浪锦裁.jpg",
                ecoData: {
                    material: "100% 聚乳酸（PLA）生物基纤维",
                    carbonFootprint: "2.1 kg CO₂",
                    degradationCycle: "1-2 年（海水环境）",
                    craft: "玉米淀粉发酵制取PLA，熔融纺丝，海洋可降解处理，3D立体剪裁",
                    certifications: ["海洋友好认证", "生物降解认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001241",
                    origin: {
                        location: "吉林长春",
                        coordinates: "43.88°N, 125.33°E",
                        farmer: "长春玉米种植基地",
                        plantingDate: "2023-04-20",
                        harvestDate: "2023-09-25"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "吉林长春",
                            date: "2023-10-05",
                            operator: "长春生物材料厂",
                            details: "玉米淀粉、发酵、提取、聚合"
                        },
                        {
                            stage: "纤维制造",
                            location: "江苏苏州",
                            date: "2023-10-20",
                            operator: "苏州生物纤维厂",
                            details: "熔融纺丝、拉伸、切断、打包"
                        },
                        {
                            stage: "成衣制作",
                            location: "广东深圳",
                            date: "2023-11-08",
                            operator: "深圳泳装厂",
                            details: "面料织造、3D剪裁、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-15",
                        agency: "国家海洋环境监测中心",
                        reportId: "NE2023111500034",
                        items: [
                            "生物降解性: 合格",
                            "海洋安全性: 合格",
                            "甲醛含量: 未检出",
                            "pH值: 6.4",
                            "纤维含量: 100%PLA"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-18 15:30:20",
                    previousHash: "0x6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b",
                    currentHash: "0x7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d"
                }
            }
        ];
        
        // 新品上架产品数据
        const newProducts = [
            {
                id: 9,
                name: "生物降解牛仔外套—绿织风尚",
                price: 259.90,
                points: 259,
                category: "jacket",
                stock: 56,
                sales: 320,
                sizes: ["M", "L", "XL", "XXL"],
                colors: ["#5d4037", "#795548", "#424242"],
                colorNames: ["深牛仔", "浅牛仔", "黑色"],
                image: "images/生物降解牛仔外套—绿织风尚.jpg",
                ecoData: {
                    material: "85% 有机棉 + 15% 生物基纤维",
                    carbonFootprint: "5.8 kg CO₂",
                    degradationCycle: "12-24 个月",
                    craft: "有机棉与生物基纤维混纺，天然靛蓝染料，石磨水洗工艺，复古做旧处理",
                    certifications: ["GOTS有机认证", "生物降解认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001242",
                    origin: {
                        location: "新疆昌吉",
                        coordinates: "44.02°N, 87.31°E",
                        farmer: "昌吉有机棉种植基地",
                        plantingDate: "2023-04-05",
                        harvestDate: "2023-09-15"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "山东滨州",
                            date: "2023-10-01",
                            operator: "滨州纺织厂",
                            details: "清花、梳棉、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "广东佛山",
                            date: "2023-10-15",
                            operator: "佛山牛仔布厂",
                            details: "机织、靛蓝染色、石磨水洗、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "广东广州",
                            date: "2023-11-05",
                            operator: "广州牛仔服装厂",
                            details: "裁剪、缝制、做旧处理、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-12",
                        agency: "国家纺织制品质量监督检验中心",
                        reportId: "QT2023111200089",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.5",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4级",
                            "纤维含量: 85%棉, 15%生物基纤维"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-15 08:25:40",
                    previousHash: "0x7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d",
                    currentHash: "0x8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f"
                }
            },
            {
                id: 10,
                name: "有机棉卫衣 —彩云万里",
                price: 169.90,
                points: 169,
                category: "t-shirt",
                stock: 89,
                sales: 410,
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["#f44336", "#2196f3", "#4caf50", "#9e9e9e"],
                colorNames: ["红色", "蓝色", "绿色", "灰色"],
                image: "images/有机棉卫衣 —彩云万里.jpg",
                ecoData: {
                    material: "100% 有机棉抓绒",
                    carbonFootprint: "3.5 kg CO₂",
                    degradationCycle: "8-15 个月",
                    craft: "有机棉双面抓绒，植物染料印花，低缩水处理，经典圆领设计",
                    certifications: ["GOTS有机认证", "Oeko-Tex Standard 100"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001243",
                    origin: {
                        location: "新疆石河子",
                        coordinates: "44.29°N, 86.03°E",
                        farmer: "石河子有机棉种植合作社",
                        plantingDate: "2023-04-12",
                        harvestDate: "2023-09-18"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "新疆石河子",
                            date: "2023-09-28",
                            operator: "石河子纺织厂",
                            details: "清花、梳棉、精梳、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "山东青岛",
                            date: "2023-10-12",
                            operator: "青岛针织厂",
                            details: "针织、抓绒、植物染料印花、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "山东威海",
                            date: "2023-10-28",
                            operator: "威海服装厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-05",
                        agency: "山东省纺织检验所",
                        reportId: "SD2023110500045",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.3",
                            "荧光剂: 未检出",
                            "缩水率: <3%",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-08 16:10:30",
                    previousHash: "0x8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f",
                    currentHash: "0x9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b"
                }
            },
            {
                id: 11,
                name: "竹纤维睡衣套装—竹柔安寝",
                price: 199.90,
                points: 199,
                category: "underwear",
                stock: 67,
                sales: 280,
                sizes: ["M", "L", "XL"],
                colors: ["#fce4ec", "#e3f2fd", "#e8f5e9"],
                colorNames: ["浅粉", "浅蓝", "浅绿"],
                image: "images/竹纤维睡衣套装—竹柔安寝.jpg",
                ecoData: {
                    material: "90% 竹纤维 + 10% 真丝",
                    carbonFootprint: "2.8 kg CO₂",
                    degradationCycle: "6-12 个月",
                    craft: "竹纤维与桑蚕丝混纺，生物酶整理，无甲醛处理，宽松舒适版型",
                    certifications: ["FSC认证", "亲肤纺织品认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001244",
                    origin: {
                        location: "福建三明",
                        coordinates: "26.26°N, 117.64°E",
                        farmer: "三明竹材种植基地",
                        plantingDate: "2020-04-05",
                        harvestDate: "2023-08-10"
                    },
                    production: [
                        {
                            stage: "竹材加工",
                            location: "福建福州",
                            date: "2023-08-20",
                            operator: "福州竹纤维厂",
                            details: "竹材破碎、蒸煮、制浆、纺丝"
                        },
                        {
                            stage: "面料织造",
                            location: "江苏吴江",
                            date: "2023-09-08",
                            operator: "吴江丝绸厂",
                            details: "竹纤维与真丝混纺、针织、生物酶整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江杭州",
                            date: "2023-09-25",
                            operator: "杭州睡衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-10-02",
                        agency: "江苏省纺织检验所",
                        reportId: "JS2023100200033",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.2",
                            "亲肤性: 优",
                            "透气性: 优等",
                            "纤维含量: 90%竹纤维, 10%真丝"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-05 13:20:15",
                    previousHash: "0x9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b",
                    currentHash: "0xa0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c"
                }
            },
            {
                id: 12,
                name: "再生纤维运动文胸—绿动轻塑",
                price: 129.90,
                points: 129,
                category: "underwear",
                stock: 78,
                sales: 350,
                sizes: ["S", "M", "L", "XL"],
                colors: ["#000000", "#f48fb1", "#90caf9", "#b2dfdb"],
                colorNames: ["黑色", "粉色", "蓝色", "薄荷绿"],
                image: "images/再生纤维运动文胸—绿动轻塑.jpg",
                ecoData: {
                    material: "80% 再生尼龙 + 20% 弹性纤维",
                    carbonFootprint: "1.5 kg CO₂（比原生尼龙减少70%）",
                    degradationCycle: "25-40 年",
                    craft: "回收海洋渔网制成再生尼龙，无缝织造技术，抗菌吸湿处理，中等强度支撑",
                    certifications: ["GRS全球回收标准", "海洋回收认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001245",
                    origin: {
                        location: "浙江舟山",
                        coordinates: "30.01°N, 122.11°E",
                        farmer: "舟山海洋渔网回收中心",
                        plantingDate: "2022-01-01",
                        harvestDate: "2023-07-25"
                    },
                    production: [
                        {
                            stage: "渔网回收",
                            location: "浙江舟山",
                            date: "2023-08-01",
                            operator: "舟山海洋回收处理中心",
                            details: "渔网收集、分类、清洗、破碎"
                        },
                        {
                            stage: "纤维制造",
                            location: "江苏苏州",
                            date: "2023-08-18",
                            operator: "苏州再生纤维厂",
                            details: "熔融纺丝、拉伸、切断、打包"
                        },
                        {
                            stage: "成衣制作",
                            location: "广东东莞",
                            date: "2023-09-05",
                            operator: "东莞运动服装厂",
                            details: "无缝织造、抗菌处理、裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-09-15",
                        agency: "中国纺织科学研究院",
                        reportId: "CT2023091500067",
                        items: [
                            "再生纤维含量: 80%",
                            "拉伸强度: 优等",
                            "甲醛含量: 未检出",
                            "pH值: 6.4",
                            "抗菌率: 99.9%"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-09-20 11:45:50",
                    previousHash: "0xa0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c",
                    currentHash: "0xb1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d"
                }
            },
            {
                id: 13,
                name: "亚麻短裤—朴织轻爽",
                price: 99.90,
                points: 99,
                category: "pants",
                stock: 123,
                sales: 480,
                sizes: ["S", "M", "L", "XL"],
                colors: ["#d7ccc8", "#a1887f", "#8d6e63", "#ffffff"],
                colorNames: ["浅麻", "中麻", "深麻", "白色"],
                image: "images/亚麻短裤—朴织轻爽.jpg",
                ecoData: {
                    material: "100% 欧洲亚麻",
                    carbonFootprint: "1.8 kg CO₂",
                    degradationCycle: "4-8 个月",
                    craft: "雨露沤麻工艺，天然酶柔软处理，植物染料，经典五分裤版型",
                    certifications: ["欧洲亚麻认证", "可持续时尚认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001246",
                    origin: {
                        location: "荷兰林堡",
                        coordinates: "50.85°N, 5.69°E",
                        farmer: "荷兰亚麻种植协会",
                        plantingDate: "2023-03-25",
                        harvestDate: "2023-08-12"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "荷兰埃因霍温",
                            date: "2023-08-22",
                            operator: "埃因霍温亚麻加工厂",
                            details: "雨露沤麻、剥麻、梳麻、纺纱"
                        },
                        {
                            stage: "面料织造",
                            location: "比利时布鲁塞尔",
                            date: "2023-09-10",
                            operator: "布鲁塞尔织造厂",
                            details: "机织、植物染料染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "江苏无锡",
                            date: "2023-09-28",
                            operator: "无锡服装厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-10-08",
                        agency: "欧洲纺织品检验中心",
                        reportId: "EU2023100800056",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.6",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4级",
                            "纤维含量: 100%亚麻"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-12 09:30:25",
                    previousHash: "0xb1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d",
                    currentHash: "0xc2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e"
                }
            },
            {
                id: 14,
                name: "有机棉婴儿服装套装—朴织萌宝",
                price: 159.90,
                points: 159,
                category: "underwear",
                stock: 156,
                sales: 390,
                sizes: ["66", "73", "80", "90", "100"],
                colors: ["#fff3e0", "#e8f5e9", "#e3f2fd", "#fce4ec"],
                colorNames: ["米色", "浅绿", "浅蓝", "浅粉"],
                image: "images/有机棉婴儿服装套装—朴织萌宝.jpg",
                ecoData: {
                    material: "100% 有机棉精梳纱",
                    carbonFootprint: "2.2 kg CO₂",
                    degradationCycle: "3-6 个月",
                    craft: "有机棉精梳工艺，无荧光剂无甲醛，植物染料印花，按扣设计方便穿脱",
                    certifications: ["GOTS有机认证", "婴儿用品安全认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001247",
                    origin: {
                        location: "新疆阿克苏",
                        coordinates: "40.52°N, 80.26°E",
                        farmer: "阿克苏有机棉种植基地",
                        plantingDate: "2023-04-08",
                        harvestDate: "2023-09-12"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "新疆阿克苏",
                            date: "2023-09-22",
                            operator: "阿克苏纺织厂",
                            details: "清花、梳棉、精梳、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "浙江绍兴",
                            date: "2023-10-08",
                            operator: "绍兴针织厂",
                            details: "针织、植物染料印花、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江湖州",
                            date: "2023-10-25",
                            operator: "湖州婴儿服装厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-02",
                        agency: "国家婴儿用品质量监督检验中心",
                        reportId: "BT2023110200023",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.0",
                            "荧光剂: 未检出",
                            "可分解致癌芳香胺染料: 未检出",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-05 14:15:40",
                    previousHash: "0xc2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e",
                    currentHash: "0xd3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f"
                }
            }
        ];
        
        // 热销榜单产品数据
        const hotProducts = [
            {
                id: 1,
                name: "有机棉T恤—素衣归本",
                price: 89.90,
                points: 89,
                category: "t-shirt",
                stock: 156,
                sales: 1250,
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["#ffffff", "#000000", "#4CAF50", "#2196F3"],
                colorNames: ["白色", "黑色", "绿色", "蓝色"],
                image: "images/有机棉T恤—素衣归本.jpg",
                ecoData: {
                    material: "100% 有机棉",
                    carbonFootprint: "2.5 kg CO₂",
                    degradationCycle: "6-12 个月",
                    craft: "采用无农药有机种植，天然染料染色，零废水处理工艺，手工缝制保证品质",
                    certifications: ["GOTS有机认证", "OEKO-TEX标准100"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001234",
                    origin: {
                        location: "新疆阿克苏",
                        coordinates: "40.52°N, 80.26°E",
                        farmer: "新疆有机棉种植合作社",
                        plantingDate: "2023-04-15",
                        harvestDate: "2023-09-20"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "山东青岛",
                            date: "2023-10-05",
                            operator: "青岛纺织厂",
                            details: "清花、梳棉、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "江苏苏州",
                            date: "2023-10-18",
                            operator: "苏州织造有限公司",
                            details: "针织、染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江杭州",
                            date: "2023-11-02",
                            operator: "杭州制衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-10",
                        agency: "国家纺织制品质量监督检验中心",
                        reportId: "QT2023111000156",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.2",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4-5级",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-12 14:30:25",
                    previousHash: "0x7f83b1657ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200129d693",
                    currentHash: "0x9c22ff5f21f0b81b113e63f7db6da94fedef11b2119b408a8dfc6db674bf0"
                }
            },
            {
                id: 6,
                name: "竹炭纤维袜子—竹素轻足",
                price: 29.90,
                points: 29,
                category: "socks",
                stock: 567,
                sales: 980,
                sizes: ["均码"],
                colors: ["#000000", "#ffffff", "#795548"],
                colorNames: ["黑色", "白色", "棕色"],
                image: "images/竹炭纤维袜子—竹素轻足.jpg",
                ecoData: {
                    material: "80% 竹炭纤维 + 20% 氨纶",
                    carbonFootprint: "0.5 kg CO₂",
                    degradationCycle: "6-12 个月",
                    craft: "竹材高温炭化，纳米级竹炭颗粒掺入纤维，抗菌整理，无缝织造",
                    certifications: ["抗菌认证", "环保纺织认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001239",
                    origin: {
                        location: "浙江安吉",
                        coordinates: "30.63°N, 119.69°E",
                        farmer: "安吉竹材种植基地",
                        plantingDate: "2021-03-15",
                        harvestDate: "2023-07-20"
                    },
                    production: [
                        {
                            stage: "竹材加工",
                            location: "浙江杭州",
                            date: "2023-08-01",
                            operator: "杭州竹炭纤维厂",
                            details: "竹材破碎、高温炭化、制浆、纺丝"
                        },
                        {
                            stage: "面料织造",
                            location: "浙江海宁",
                            date: "2023-08-18",
                            operator: "海宁袜子厂",
                            details: "混纺、抗菌整理、无缝织造"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江诸暨",
                            date: "2023-09-08",
                            operator: "诸暨袜子织造厂",
                            details: "缝头、定型、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-09-15",
                        agency: "浙江省纺织检验所",
                        reportId: "ZJ2023091500056",
                        items: [
                            "抗菌率: 99.9%",
                            "除臭率: 95%",
                            "甲醛含量: 未检出",
                            "pH值: 6.5",
                            "纤维含量: 80%竹炭纤维, 20%氨纶"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-09-18 14:20:45",
                    previousHash: "0x4b5f16e78a23a5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f",
                    currentHash: "0x5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f"
                }
            },
            {
                id: 3,
                name: "麻质连衣裙—素麻清风",
                price: 159.90,
                points: 159,
                category: "dress",
                stock: 45,
                sales: 850,
                sizes: ["S", "M", "L", "XL"],
                colors: ["#8d6e63", "#d7ccc8", "#a1887f"],
                colorNames: ["深麻色", "浅麻色", "中麻色"],
                image: "images/麻质连衣裙—素麻清风.jpg",
                ecoData: {
                    material: "100% 法国亚麻",
                    carbonFootprint: "3.2 kg CO₂",
                    degradationCycle: "5-10 个月",
                    craft: "法国诺曼底亚麻种植，传统沤麻工艺，植物染料，手工裁剪缝制",
                    certifications: ["欧洲亚麻认证", "有机纺织品认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001236",
                    origin: {
                        location: "法国诺曼底",
                        coordinates: "49.28°N, 0.72°W",
                        farmer: "法国亚麻种植合作社",
                        plantingDate: "2023-03-10",
                        harvestDate: "2023-08-05"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "法国里尔",
                            date: "2023-08-15",
                            operator: "里尔亚麻加工厂",
                            details: "雨露沤麻、剥麻、梳麻、纺纱"
                        },
                        {
                            stage: "面料织造",
                            location: "意大利米兰",
                            date: "2023-09-01",
                            operator: "米兰织造厂",
                            details: "机织、植物染料染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "上海",
                            date: "2023-09-20",
                            operator: "上海高级定制工坊",
                            details: "手工裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-09-28",
                        agency: "国际纺织品检验中心",
                        reportId: "IT2023092800047",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.8",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4级",
                            "纤维含量: 100%亚麻"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-01 09:15:20",
                    previousHash: "0x2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7a",
                    currentHash: "0xa948904f2f0f479b8f8197694b30184b0d2ed1c2a5930e829f66725169c5b9e"
                }
            },
            {
                id: 7,
                name: "亚麻衬衫—清风织麻",
                price: 149.90,
                points: 149,
                category: "t-shirt",
                stock: 78,
                sales: 720,
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["#ffffff", "#f5f5f5", "#e0e0e0", "#8d6e63"],
                colorNames: ["白色", "米白", "浅灰", "麻色"],
                image: "images/亚麻衬衫—清风织麻.jpg",
                ecoData: {
                    material: "100% 比利时亚麻",
                    carbonFootprint: "2.8 kg CO₂",
                    degradationCycle: "5-10 个月",
                    craft: "比利时亚麻种植，雨露沤麻，植物染料，经典版型，手工缝制",
                    certifications: ["欧洲亚麻大师认证", "可持续时尚认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001240",
                    origin: {
                        location: "比利时弗拉芒",
                        coordinates: "51.21°N, 4.42°E",
                        farmer: "比利时亚麻种植协会",
                        plantingDate: "2023-03-20",
                        harvestDate: "2023-08-10"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "比利时根特",
                            date: "2023-08-20",
                            operator: "根特亚麻加工厂",
                            details: "雨露沤麻、剥麻、梳麻、纺纱"
                        },
                        {
                            stage: "面料织造",
                            location: "意大利佛罗伦萨",
                            date: "2023-09-08",
                            operator: "佛罗伦萨织造厂",
                            details: "机织、植物染料染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "江苏苏州",
                            date: "2023-09-28",
                            operator: "苏州衬衫厂",
                            details: "手工裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-10-05",
                        agency: "欧洲纺织品检验中心",
                        reportId: "EU2023100500092",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.7",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4级",
                            "纤维含量: 100%亚麻"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-08 11:45:30",
                    previousHash: "0x5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f",
                    currentHash: "0x6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b"
                }
            },
            {
                id: 2,
                name: "竹纤维运动裤—竹韧轻行",
                price: 129.90,
                points: 129,
                category: "pants",
                stock: 89,
                sales: 680,
                sizes: ["M", "L", "XL", "XXL"],
                colors: ["#424242", "#757575", "#2e7d32"],
                colorNames: ["深灰", "浅灰", "绿色"],
                image: "images/竹纤维运动裤—竹韧轻行.jpg",
                ecoData: {
                    material: "70% 竹纤维 + 30% 有机棉",
                    carbonFootprint: "1.8 kg CO₂",
                    degradationCycle: "8-15 个月",
                    craft: "竹材采用可持续砍伐，物理法提取纤维，生物酶脱胶，低能耗针织工艺",
                    certifications: ["FSC森林认证", "碳足迹认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001235",
                    origin: {
                        location: "福建南平",
                        coordinates: "26.65°N, 118.17°E",
                        farmer: "福建竹海竹材种植基地",
                        plantingDate: "2020-03-20",
                        harvestDate: "2023-08-15"
                    },
                    production: [
                        {
                            stage: "竹材加工",
                            location: "福建福州",
                            date: "2023-08-25",
                            operator: "福州竹纤维厂",
                            details: "竹材破碎、蒸煮、制浆、纺丝"
                        },
                        {
                            stage: "面料织造",
                            location: "广东东莞",
                            date: "2023-09-10",
                            operator: "东莞针织厂",
                            details: "混纺、针织、生物酶整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "广东深圳",
                            date: "2023-09-28",
                            operator: "深圳制衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-10-05",
                        agency: "广东省纤维检验局",
                        reportId: "GD2023100500089",
                        items: [
                            "抗菌率: 99.9%",
                            "透气率: 优等",
                            "甲醛含量: 未检出",
                            "pH值: 6.5",
                            "纤维含量: 70%竹纤维, 30%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-08 10:15:32",
                    previousHash: "0x9c22ff5f21f0b81b113e63f7db6da94fedef11b2119b408a8dfc6db674bf0",
                    currentHash: "0x2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7a"
                }
            },
            {
                id: 5,
                name: "有机棉内衣套装—棉柔初心",
                price: 79.90,
                points: 79,
                category: "underwear",
                stock: 234,
                sales: 550,
                sizes: ["M", "L", "XL"],
                colors: ["#fff3e0", "#ffccbc", "#e0e0e0"],
                colorNames: ["肤色", "浅粉", "浅灰"],
                image: "images/有机棉内衣套装—棉柔初心.jpg",
                ecoData: {
                    material: "100% 新疆有机长绒棉",
                    carbonFootprint: "1.2 kg CO₂",
                    degradationCycle: "4-8 个月",
                    craft: "有机种植不使用化肥农药，天然植物染料，无荧光剂，精工细作",
                    certifications: ["GOTS有机认证", "亲肤认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001238",
                    origin: {
                        location: "新疆喀什",
                        coordinates: "39.47°N, 76.17°E",
                        farmer: "喀什有机长绒棉种植基地",
                        plantingDate: "2023-04-01",
                        harvestDate: "2023-09-10"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "新疆乌鲁木齐",
                            date: "2023-09-20",
                            operator: "乌鲁木齐纺织厂",
                            details: "清花、梳棉、精梳、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "浙江绍兴",
                            date: "2023-10-05",
                            operator: "绍兴针织厂",
                            details: "针织、植物染料染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "广东东莞",
                            date: "2023-10-25",
                            operator: "东莞内衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-02",
                        agency: "国家纺织品质量监督检验中心",
                        reportId: "QT2023110200078",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.0",
                            "荧光剂: 未检出",
                            "亲肤性: 优",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-05 10:30:00",
                    previousHash: "0x3a5ebc357ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200129d693",
                    currentHash: "0x4b5f16e78a23a5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f"
                }
            }
        ];
        
        // 积分专区产品数据
        const pointsProducts = [
            {
                id: 15,
                name: "环保袋—绿韵布囊",
                price: 0,
                points: 500,
                category: "accessories",
                stock: 234,
                sales: 890,
                sizes: ["均码"],
                colors: ["#4caf50", "#2196f3", "#ff9800"],
                colorNames: ["绿色", "蓝色", "橙色"],
                image: "images/环保袋—绿韵布囊.jpg",
                ecoData: {
                    material: "100% 再生棉帆布",
                    carbonFootprint: "0.8 kg CO₂",
                    degradationCycle: "12-24 个月",
                    craft: "回收旧衣物制成再生棉，环保印染工艺，可重复使用1000次以上",
                    certifications: ["GRS全球回收标准", "零废弃认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001248",
                    origin: {
                        location: "浙江杭州",
                        coordinates: "30.27°N, 120.15°E",
                        farmer: "杭州旧衣物回收中心",
                        plantingDate: "2023-01-01",
                        harvestDate: "2023-06-15"
                    },
                    production: [
                        {
                            stage: "旧衣回收",
                            location: "浙江杭州",
                            date: "2023-06-20",
                            operator: "杭州旧衣回收处理中心",
                            details: "旧衣物收集、分类、消毒、破碎"
                        },
                        {
                            stage: "再生棉制造",
                            location: "江苏苏州",
                            date: "2023-07-05",
                            operator: "苏州再生棉厂",
                            details: "开松、除杂、梳理、纺纱"
                        },
                        {
                            stage: "成品制作",
                            location: "浙江嘉兴",
                            date: "2023-07-20",
                            operator: "嘉兴环保袋厂",
                            details: "面料织造、裁剪、缝制、环保印染、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-07-28",
                        agency: "浙江省纺织品检验所",
                        reportId: "ZJ2023072800045",
                        items: [
                            "再生棉含量: 100%",
                            "拉力强度: 优等",
                            "甲醛含量: 未检出",
                            "pH值: 6.3",
                            "可重复使用次数: ≥1000次"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-08-01 09:30:15",
                    previousHash: "0xd3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f",
                    currentHash: "0xe4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a"
                }
            },
            {
                id: 16,
                name: "积分兑换有机棉手帕 - 红梅出墙",
                price: 0,
                points: 100,
                category: "accessories",
                stock: 567,
                sales: 1230,
                sizes: ["均码"],
                colors: ["#ffffff", "#fce4ec", "#e8f5e9", "#fff3e0"],
                colorNames: ["白色", "浅粉", "浅绿", "米色"],
                image: "images/积分兑换有机棉手帕 - 红梅出墙.jpg",
                ecoData: {
                    material: "100% 有机棉双层纱布",
                    carbonFootprint: "0.3 kg CO₂",
                    degradationCycle: "3-6 个月",
                    craft: "有机棉精梳工艺，植物染料印花，包边缝制，可替代纸巾使用",
                    certifications: ["GOTS有机认证", "可循环使用认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001249",
                    origin: {
                        location: "新疆石河子",
                        coordinates: "44.29°N, 86.03°E",
                        farmer: "石河子有机棉种植合作社",
                        plantingDate: "2023-04-10",
                        harvestDate: "2023-09-05"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "新疆石河子",
                            date: "2023-09-15",
                            operator: "石河子纺织厂",
                            details: "清花、梳棉、精梳、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "山东青岛",
                            date: "2023-09-28",
                            operator: "青岛纱布厂",
                            details: "双层纱布织造、植物染料印花、后整理"
                        },
                        {
                            stage: "成品制作",
                            location: "山东潍坊",
                            date: "2023-10-12",
                            operator: "潍坊手帕厂",
                            details: "裁剪、包边缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-10-18",
                        agency: "山东省纺织检验所",
                        reportId: "SD2023101800034",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.2",
                            "荧光剂: 未检出",
                            "吸水性: 优等",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-10-22 11:20:35",
                    previousHash: "0xe4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a",
                    currentHash: "0xf5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b"
                }
            },
            {
                id: 17,
                name: "积分兑换竹纤维毛巾—清竹亲肤",
                price: 0,
                points: 200,
                category: "accessories",
                stock: 345,
                sales: 980,
                sizes: ["均码"],
                colors: ["#ffffff", "#8d6e63", "#90a4ae", "#ffccbc"],
                colorNames: ["白色", "麻色", "蓝色", "粉色"],
                image: "images/积分兑换竹纤维毛巾—清竹亲肤.jpg",
                ecoData: {
                    material: "100% 竹纤维",
                    carbonFootprint: "0.6 kg CO₂",
                    degradationCycle: "6-12 个月",
                    craft: "竹材物理法提取纤维，抗菌整理，毛圈织造工艺，吸水力是普通毛巾3倍",
                    certifications: ["FSC森林认证", "抗菌纺织品认证"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001250",
                    origin: {
                        location: "福建三明",
                        coordinates: "26.26°N, 117.64°E",
                        farmer: "三明竹材种植基地",
                        plantingDate: "2020-03-25",
                        harvestDate: "2023-07-25"
                    },
                    production: [
                        {
                            stage: "竹材加工",
                            location: "福建福州",
                            date: "2023-08-05",
                            operator: "福州竹纤维厂",
                            details: "竹材破碎、蒸煮、制浆、纺丝"
                        },
                        {
                            stage: "面料织造",
                            location: "浙江高阳",
                            date: "2023-08-20",
                            operator: "高阳毛巾厂",
                            details: "毛圈织造、抗菌整理、后整理"
                        },
                        {
                            stage: "成品制作",
                            location: "河北保定",
                            date: "2023-09-08",
                            operator: "保定毛巾织造厂",
                            details: "裁剪、缝边、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-09-15",
                        agency: "河北省纺织检验所",
                        reportId: "HE2023091500067",
                        items: [
                            "抗菌率: 99.9%",
                            "吸水性: 优等",
                            "甲醛含量: 未检出",
                            "pH值: 6.4",
                            "纤维含量: 100%竹纤维"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-09-20 14:45:55",
                    previousHash: "0xf5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b",
                    currentHash: "0xa6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c"
                }
            },
            {
                id: 18,
                name: "积分加现金有机棉T恤—棉朴国风",
                price: 49.90,
                points: 300,
                category: "t-shirt",
                stock: 78,
                sales: 560,
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["#ffffff", "#000000", "#4caf50", "#2196f3"],
                colorNames: ["白色", "黑色", "绿色", "蓝色"],
                image: "images/积分加现金有机棉T恤—棉朴国风.jpg",
                ecoData: {
                    material: "100% 有机棉",
                    carbonFootprint: "2.5 kg CO₂",
                    degradationCycle: "6-12 个月",
                    craft: "采用无农药有机种植，天然染料染色，零废水处理工艺，手工缝制保证品质",
                    certifications: ["GOTS有机认证", "OEKO-TEX标准100"]
                },
                traceability: {
                    blockchainId: "BLK-2024-001251",
                    origin: {
                        location: "新疆阿克苏",
                        coordinates: "40.52°N, 80.26°E",
                        farmer: "新疆有机棉种植合作社",
                        plantingDate: "2023-04-15",
                        harvestDate: "2023-09-20"
                    },
                    production: [
                        {
                            stage: "原料加工",
                            location: "山东青岛",
                            date: "2023-10-05",
                            operator: "青岛纺织厂",
                            details: "清花、梳棉、并条、粗纱、细纱"
                        },
                        {
                            stage: "面料织造",
                            location: "江苏苏州",
                            date: "2023-10-18",
                            operator: "苏州织造有限公司",
                            details: "针织、染色、后整理"
                        },
                        {
                            stage: "成衣制作",
                            location: "浙江杭州",
                            date: "2023-11-02",
                            operator: "杭州制衣厂",
                            details: "裁剪、缝制、质检、包装"
                        }
                    ],
                    inspection: {
                        date: "2023-11-10",
                        agency: "国家纺织制品质量监督检验中心",
                        reportId: "QT2023111000167",
                        items: [
                            "甲醛含量: 未检出",
                            "pH值: 6.2",
                            "可分解致癌芳香胺染料: 未检出",
                            "色牢度: 4-5级",
                            "纤维含量: 100%棉"
                        ],
                        result: "合格"
                    },
                    timestamp: "2023-11-15 10:30:45",
                    previousHash: "0xa6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c",
                    currentHash: "0xb7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d"
                }
            }
        ];
        
        // 渲染产品列表
        function renderProducts(productList = products, tabType = 'recommend') {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            currentTabType = tabType;
            
            // 应用筛选
            let filteredProducts = [...productList];
            
            // 分类筛选
            if (currentCategory !== 'all') {
                filteredProducts = filteredProducts.filter(p => p.category === currentCategory);
            }
            
            // 价格筛选
            if (priceMin !== null) {
                filteredProducts = filteredProducts.filter(p => p.price >= priceMin);
            }
            if (priceMax !== null) {
                filteredProducts = filteredProducts.filter(p => p.price <= priceMax);
            }
            
            // 排序
            let sortedProducts = [...filteredProducts];
            switch(currentSort) {
                case 'price-asc':
                    sortedProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    sortedProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'sales-desc':
                    sortedProducts.sort((a, b) => (b.sales || 0) - (a.sales || 0));
                    break;
                case 'points-desc':
                    sortedProducts.sort((a, b) => b.points - a.points);
                    break;
            }
            
            currentProducts = [...sortedProducts];
            
            sortedProducts.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.style.cursor = 'pointer';
                card.onclick = function(event) {
                    if (!event.target.closest('button')) {
                        showProductDetail(product.id);
                    }
                };
                
                // 根据标签类型添加不同的徽章
                let badgeContent = '';
                if (tabType === 'new') {
                    badgeContent = '<div class="product-badge" style="background: linear-gradient(135deg, #FF6B6B, #FF8E53);">新品上架</div>';
                } else if (tabType === 'hot') {
                    badgeContent = `<div class="product-badge" style="background: linear-gradient(135deg, #FFD93D, #FF9234);">热销第${index + 1}名</div>`;
                } else if (tabType === 'points') {
                    badgeContent = '<div class="product-badge" style="background: linear-gradient(135deg, #4ECDC4, #45B7D1);">积分专区</div>';
                } else {
                    badgeContent = '<div class="product-badge">环保认证</div>';
                }
                
                // 添加库存状态徽章
                let stockBadge = '';
                if (product.stock !== undefined) {
                    if (product.stock === 0) {
                        stockBadge = '<div class="product-badge" style="background: linear-gradient(135deg, #f44336, #e91e63); right: 90px;">缺货</div>';
                    } else if (product.stock <= 10) {
                        stockBadge = `<div class="product-badge" style="background: linear-gradient(135deg, #ff9800, #ffc107); right: 90px;">仅剩${product.stock}件</div>`;
                    }
                }
                
                // 构建产品卡片内容
                const isFavorited = favorites.includes(product.id);
                let cardContent = `
                    ${badgeContent}
                    ${stockBadge}
                    <button class="favorite-btn ${isFavorited ? 'favorited' : ''}" onclick="toggleFavorite(${product.id}, event)">
                        <i class="${isFavorited ? 'fas' : 'far'} fa-heart"></i>
                    </button>
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhmOWZhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=='">
                    </div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                `;
                
                // 添加价格信息
                if (product.price > 0) {
                    cardContent += `<div class="product-price">¥${product.price.toFixed(2)}</div>`;
                } else {
                    cardContent += `<div class="product-price" style="color: #4ECDC4;">积分兑换</div>`;
                }
                
                // 添加积分信息
                if (tabType === 'points') {
                    cardContent += `
                        <div class="product-points">
                            <i class="fas fa-seedling"></i>
                            需要 ${product.points} 积分
                        </div>
                    `;
                } else if (tabType === 'hot') {
                    cardContent += `
                        <div class="product-points">
                            <i class="fas fa-fire"></i>
                            已售 ${product.sales} 件
                        </div>
                        <div class="product-points" style="margin-top: 0.3rem;">
                            <i class="fas fa-seedling"></i>
                            购买可获 ${product.points} 碳足迹积分
                        </div>
                    `;
                } else {
                    cardContent += `
                        <div class="product-points">
                            <i class="fas fa-seedling"></i>
                            购买可获 ${product.points} 碳足迹积分
                        </div>
                    `;
                }
                
                // 添加环保指标标签
                if (product.ecoData) {
                    cardContent += `
                        <div class="eco-tags">
                            <span class="eco-tag">${product.ecoData.material}</span>
                            <span class="eco-tag">碳足迹: ${product.ecoData.carbonFootprint}</span>
                        </div>
                    `;
                }
                
                // 添加区块链溯源标签
                if (product.traceability) {
                    cardContent += `
                        <div class="traceability-badge">
                            <i class="fas fa-link"></i>
                            <span>区块链溯源</span>
                        </div>
                    `;
                }
                
                // 添加按钮
                if (tabType === 'points' && product.price === 0) {
                    cardContent += `
                        <button class="buy-button" onclick="redeemProduct(${product.id})">
                            <i class="fas fa-exchange-alt"></i> 积分兑换
                        </button>
                    `;
                } else if (tabType === 'points' && product.price > 0) {
                    cardContent += `
                        <div class="button-group">
                            <button class="buy-button" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> 购买
                            </button>
                        </div>
                    `;
                } else {
                    cardContent += `
                        <div class="button-group">
                            <button class="buy-button" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> 加入购物车
                            </button>
                            <button class="ai-try-button" onclick="aiTryOn(${product.id})">
                                <i class="fas fa-robot"></i> AI试穿
                            </button>
                        </div>
                    `;
                }
                
                // 添加环保详情按钮
                if (product.ecoData) {
                    cardContent += `
                        <button class="eco-detail-button" onclick="showEcoDetail(${product.id})">
                            <i class="fas fa-leaf"></i> 查看环保详情
                        </button>
                    `;
                }
                
                // 添加区块链溯源按钮
                if (product.traceability) {
                    cardContent += `
                        <button class="traceability-button" onclick="showTraceability(${product.id})">
                            <i class="fas fa-cube"></i> 区块链溯源
                        </button>
                    `;
                }
                
                cardContent += `
                    </div>
                `;
                
                card.innerHTML = cardContent;
                grid.appendChild(card);
            });
        }
        
        // 添加到购物车
        function addToCart(productId) {
            const product = products.find(p => p.id === productId) || 
                          newProducts.find(p => p.id === productId) || 
                          hotProducts.find(p => p.id === productId) || 
                          pointsProducts.find(p => p.id === productId);
            if (product) {
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({
                        ...product,
                        quantity: 1,
                        selected: true
                    });
                }
                updateCart();
                showNotification(`🛒 ${product.name} 已加入购物车！`);
            }
        }
        
        // 增减购物车商品数量
        function updateCartItemQuantity(productId, delta) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += delta;
                if (item.quantity <= 0) {
                    cart = cart.filter(i => i.id !== productId);
                }
                updateCart();
            }
        }
        
        // 切换购物车商品选中状态
        function toggleCartItemSelect(productId) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.selected = !item.selected;
                updateCart();
            }
        }
        
        // 全选/取消全选购物车商品
        function toggleSelectAllCartItems() {
            const allSelected = cart.every(item => item.selected);
            cart.forEach(item => {
                item.selected = !allSelected;
            });
            updateCart();
        }
        
        // 清空购物车
        function clearCart() {
            if (cart.length === 0) {
                showNotification('购物车已经是空的了');
                return;
            }
            if (confirm('确定要清空购物车吗？')) {
                cart = [];
                updateCart();
                showNotification('购物车已清空');
            }
        }
        
        // 从购物车移除商品
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
            showNotification('🗑️ 商品已从购物车移除');
        }
        
        // 更新购物车
        function updateCart() {
            const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = cartCount;
            document.getElementById('floatingCartCount').textContent = cartCount;
            document.getElementById('modalCartCount').textContent = cartCount;
            
            // 更新购物车模态框内容
            const cartItemsDiv = document.getElementById('cartItems');
            cartItemsDiv.innerHTML = '';
            
            // 添加全选和清空按钮
            if (cart.length > 0) {
                const allSelected = cart.every(item => item.selected);
                const headerDiv = document.createElement('div');
                headerDiv.className = 'cart-header-actions';
                headerDiv.innerHTML = `
                    <label class="select-all-label">
                        <input type="checkbox" ${allSelected ? 'checked' : ''} onchange="toggleSelectAllCartItems()">
                        <span>全选</span>
                    </label>
                    <button class="clear-cart-btn" onclick="clearCart()">
                        <i class="fas fa-trash-alt"></i> 清空购物车
                    </button>
                `;
                cartItemsDiv.appendChild(headerDiv);
            }
            
            let subtotal = 0;
            let selectedItems = cart.filter(item => item.selected);
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                if (item.selected) {
                    subtotal += itemTotal;
                }
                
                const cartItem = document.createElement('div');
                cartItem.className = `cart-item ${item.selected ? '' : 'cart-item-unselected'}`;
                cartItem.innerHTML = `
                    <div class="cart-item-checkbox">
                        <input type="checkbox" ${item.selected ? 'checked' : ''} onchange="toggleCartItemSelect(${item.id})">
                    </div>
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2Y4ZjlmYSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=='">
                    </div>
                    <div class="cart-item-info">
                        <div class="cart-item-title">${item.name}</div>
                        <div class="cart-item-price">¥${item.price.toFixed(2)}</div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn" onclick="updateCartItemQuantity(${item.id}, -1)">-</button>
                            <span class="quantity-value">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateCartItemQuantity(${item.id}, 1)">+</button>
                        </div>
                    </div>
                    <div class="cart-item-subtotal">
                        <div class="subtotal-label">小计</div>
                        <div class="subtotal-value">¥${itemTotal.toFixed(2)}</div>
                    </div>
                    <button class="remove-item" onclick="removeFromCart(${item.id})">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                cartItemsDiv.appendChild(cartItem);
            });
            
            // 计算各项费用
            let shippingFee = 0;
            if (subtotal > 0 && subtotal < 99) {
                shippingFee = 10; // 不满99元收10元运费
            }
            
            let couponDiscount = 0;
            if (appliedCoupon && subtotal > 0) {
                const coupon = availableCoupons[appliedCoupon];
                if (subtotal >= coupon.minAmount) {
                    couponDiscount = coupon.discount;
                }
            }
            
            const creditUsed = Math.min(subtotal + shippingFee - couponDiscount, totalCredit);
            const totalBeforeCredit = subtotal + shippingFee - couponDiscount;
            const finalTotal = Math.max(0, totalBeforeCredit - creditUsed);
            
            // 更新优惠券区域
            const discountSection = document.getElementById('cartDiscountSection');
            if (appliedCoupon) {
                const coupon = availableCoupons[appliedCoupon];
                discountSection.innerHTML = `
                    <div class="applied-coupon">
                        <span><i class="fas fa-check-circle"></i> ${coupon.name} (${appliedCoupon})：-¥${couponDiscount.toFixed(2)}</span>
                        <button class="remove-coupon-btn" onclick="removeCoupon()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            } else {
                discountSection.innerHTML = `
                    <div id="couponArea">
                        <div class="coupon-input-wrapper">
                            <input type="text" class="coupon-input" id="couponInput" placeholder="输入优惠券代码（例如：NEW10、SAVE20）">
                            <button class="coupon-btn" onclick="applyCoupon()">使用优惠券</button>
                        </div>
                        <p style="font-size: 0.85rem; color: #666; margin-bottom: 0;">
                            <i class="fas fa-info-circle"></i> 可用优惠券：NEW10（满100减10）、SAVE20（满200减20）、GREEN30（满300减30）
                        </p>
                    </div>
                `;
            }
            
            // 渲染费用明细
            const totalSection = document.getElementById('cartTotalSection');
            let costBreakdownHtml = '<div class="cost-breakdown">';
            
            costBreakdownHtml += `
                <div class="cost-row">
                    <span class="cost-label">商品小计</span>
                    <span class="cost-value">¥${subtotal.toFixed(2)}</span>
                </div>
            `;
            
            if (shippingFee > 0) {
                costBreakdownHtml += `
                    <div class="cost-row">
                        <span class="cost-label">配送费</span>
                        <span class="cost-value">¥${shippingFee.toFixed(2)}</span>
                    </div>
                `;
            } else if (subtotal > 0) {
                costBreakdownHtml += `
                    <div class="cost-row">
                        <span class="cost-label">配送费</span>
                        <span class="cost-value" style="color: #4CAF50;">免运费</span>
                    </div>
                `;
            }
            
            if (couponDiscount > 0) {
                costBreakdownHtml += `
                    <div class="cost-row">
                        <span class="cost-label">优惠券</span>
                        <span class="cost-value discount">-¥${couponDiscount.toFixed(2)}</span>
                    </div>
                `;
            }
            
            if (creditUsed > 0) {
                costBreakdownHtml += `
                    <div class="cost-row">
                        <span class="cost-label">积分抵扣</span>
                        <span class="cost-value discount">-¥${creditUsed.toFixed(2)}</span>
                    </div>
                `;
            }
            
            costBreakdownHtml += `
                <div class="cost-row total">
                    <span class="cost-label">应付金额</span>
                    <span class="cost-value total">¥${finalTotal.toFixed(2)}</span>
                </div>
            `;
            
            costBreakdownHtml += '</div>';
            costBreakdownHtml += '<button class="checkout-btn" onclick="checkout()">去结算</button>';
            
            totalSection.innerHTML = costBreakdownHtml;
            
            // 更新结算按钮状态
            const checkoutBtn = totalSection.querySelector('.checkout-btn');
            if (checkoutBtn) {
                checkoutBtn.disabled = selectedItems.length === 0;
                checkoutBtn.style.opacity = selectedItems.length === 0 ? '0.5' : '1';
            }
        }
        
        // 应用优惠券
        function applyCoupon() {
            const couponInput = document.getElementById('couponInput');
            const code = couponInput.value.trim().toUpperCase();
            
            if (!code) {
                showNotification('请输入优惠券代码');
                return;
            }
            
            if (availableCoupons[code]) {
                appliedCoupon = code;
                updateCart();
                showNotification(`✅ 优惠券 ${code} 已使用！`);
            } else {
                showNotification('❌ 无效的优惠券代码');
            }
        }
        
        // 移除优惠券
        function removeCoupon() {
            appliedCoupon = null;
            updateCart();
            showNotification('优惠券已移除');
        }
        
        // 结算
        function checkout() {
            const selectedItems = cart.filter(item => item.selected);
            if (selectedItems.length === 0) {
                showNotification('🛒 请先选择要结算的商品');
                return;
            }
            
            // 计算总金额
            let subtotal = 0;
            let totalPurchasePoints = 0;
            selectedItems.forEach(item => {
                subtotal += item.price * item.quantity;
                totalPurchasePoints += item.points * item.quantity;
            });
            
            // 计算配送费
            let shippingFee = 0;
            if (subtotal > 0 && subtotal < 99) {
                shippingFee = 10;
            }
            
            // 计算优惠券折扣
            let couponDiscount = 0;
            if (appliedCoupon) {
                const coupon = availableCoupons[appliedCoupon];
                if (subtotal >= coupon.minAmount) {
                    couponDiscount = coupon.discount;
                }
            }
            
            const totalBeforeCredit = subtotal + shippingFee - couponDiscount;
            const creditUsed = Math.min(totalBeforeCredit, totalCredit);
            const actualTotal = Math.max(0, totalBeforeCredit - creditUsed);
            
            // 创建订单记录
            const order = {
                id: Date.now(),
                items: [...selectedItems],
                subtotal: subtotal,
                shippingFee: shippingFee,
                couponDiscount: couponDiscount,
                couponCode: appliedCoupon,
                creditUsed: creditUsed,
                total: totalBeforeCredit,
                actualTotal: actualTotal,
                pointsEarned: totalPurchasePoints,
                timestamp: new Date().toLocaleString('zh-CN')
            };
            
            orderHistory.unshift(order);
            localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
            
            // 更新积分和抵扣金额
            totalPoints += totalPurchasePoints;
            totalCredit = Math.max(0, totalCredit - creditUsed);
            
            // 移除已结算的商品
            cart = cart.filter(item => !item.selected);
            appliedCoupon = null; // 清空已使用的优惠券
            updateCart();
            updatePointsDisplay();
            
            let message = `🎉 结算成功！`;
            if (shippingFee > 0) {
                message += ` 运费¥${shippingFee.toFixed(2)}，`;
            }
            if (couponDiscount > 0) {
                message += ` 优惠券减¥${couponDiscount.toFixed(2)}，`;
            }
            if (creditUsed > 0) {
                message += ` 积分抵扣¥${creditUsed.toFixed(2)}，`;
            }
            message += `实际支付¥${actualTotal.toFixed(2)}，获得 ${totalPurchasePoints} 碳足迹积分`;
            
            showNotification(message);
            closeCartModal();
        }
        
        // 兑换优惠券
        function redeemVoucher() {
            if (totalPoints >= 100) {
                totalPoints -= 100;
                totalCredit += 10.00;
                updatePointsDisplay();
                showNotification('✅ 成功兑换¥10优惠券！已存入您的账户');
            } else {
                showNotification('❌ 积分不足，无法兑换！');
            }
        }
        
        // 抵押金额
        function redeemCash() {
            if (totalPoints >= 200) {
                totalPoints -= 200;
                totalCredit += 20.00;
                updatePointsDisplay();
                showNotification('✅ 成功抵押¥20！已存入您的账户');
            } else {
                showNotification('❌ 积分不足，无法抵押！');
            }
        }
        
        // 兑换环保袋
        function redeemBag() {
            if (totalPoints >= 500) {
                totalPoints -= 500;
                updatePointsDisplay();
                showNotification('🎁 恭喜！免费环保袋已加入您的订单');
            } else {
                showNotification('❌ 积分不足，无法兑换环保袋！');
            }
        }
        
        // 兑换积分产品
        function redeemProduct(productId) {
            const product = pointsProducts.find(p => p.id === productId);
            if (product) {
                if (totalPoints >= product.points) {
                    totalPoints -= product.points;
                    updatePointsDisplay();
                    showNotification(`🎁 恭喜！${product.name} 兑换成功！`);
                } else {
                    showNotification(`❌ 积分不足，需要 ${product.points} 积分才能兑换！`);
                }
            }
        }
        
        // 更新积分显示
        function updatePointsDisplay() {
            document.getElementById('totalPoints').textContent = totalPoints;
            document.getElementById('totalCredit').textContent = totalCredit.toFixed(2);
            // 保存到localStorage
            localStorage.setItem('totalPoints', totalPoints.toString());
            localStorage.setItem('totalCredit', totalCredit.toFixed(2));
        }
        
        // 显示通知
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // 打开购物车模态框
        function openCartModal() {
            document.getElementById('cartModal').classList.add('open');
        }
        
        // 关闭购物车模态框
        function closeCartModal() {
            document.getElementById('cartModal').classList.remove('open');
        }
        
        // AI试穿功能
        function aiTryOn(productId) {
            // 保存当前页面状态
            localStorage.setItem('currentProductId', productId);
            localStorage.setItem('currentTab', document.querySelector('.tab-item.active').textContent);
            
            // 跳转到AI试穿页面
            window.location.href = 'ai-try-on.html';
        }
        
        // 显示环保详情模态框
        function showEcoDetail(productId) {
            const product = getProductById(productId);
            if (!product || !product.ecoData) {
                showNotification('❌ 该产品暂无环保详情');
                return;
            }
            
            const ecoData = product.ecoData;
            document.getElementById('ecoModalTitle').textContent = product.name + ' - 环保详情';
            
            let certificationsHtml = '';
            if (ecoData.certifications && ecoData.certifications.length > 0) {
                certificationsHtml = ecoData.certifications.map(cert => 
                    `<span class="eco-certification">${cert}</span>`
                ).join('');
            }
            
            const content = `
                <div class="eco-section">
                    <div class="eco-section-title">
                        <i class="fas fa-recycle"></i>
                        环保指标
                    </div>
                    <div class="eco-info-item">
                        <div class="eco-info-label">原料成分</div>
                        <div class="eco-info-value">${ecoData.material}</div>
                    </div>
                    <div class="eco-info-item">
                        <div class="eco-info-label">碳足迹</div>
                        <div class="eco-info-value">${ecoData.carbonFootprint}</div>
                    </div>
                    <div class="eco-info-item">
                        <div class="eco-info-label">降解周期</div>
                        <div class="eco-info-value">${ecoData.degradationCycle}</div>
                    </div>
                </div>
                
                <div class="eco-section">
                    <div class="eco-section-title">
                        <i class="fas fa-industry"></i>
                        生产工艺
                    </div>
                    <div class="eco-craft-detail">
                        ${ecoData.craft}
                    </div>
                </div>
                
                ${certificationsHtml ? `
                <div class="eco-section">
                    <div class="eco-section-title">
                        <i class="fas fa-award"></i>
                        环保认证
                    </div>
                    <div class="eco-certifications">
                        ${certificationsHtml}
                    </div>
                </div>
                ` : ''}
            `;
            
            document.getElementById('ecoModalContent').innerHTML = content;
            document.getElementById('ecoModalOverlay').classList.add('open');
        }
        
        // 关闭环保详情模态框
        function closeEcoModal() {
            document.getElementById('ecoModalOverlay').classList.remove('open');
        }
        
        // 显示区块链溯源模态框
        function showTraceability(productId) {
            const product = getProductById(productId);
            if (!product || !product.traceability) {
                showNotification('❌ 该产品暂无溯源信息');
                return;
            }
            
            const trace = product.traceability;
            document.getElementById('traceabilityModalTitle').innerHTML = `<i class="fas fa-cube"></i> ${product.name} - 区块链溯源`;
            
            // 生成生产流程时间线
            let productionTimeline = '';
            if (trace.production && trace.production.length > 0) {
                productionTimeline = trace.production.map(item => `
                    <div class="timeline-item">
                        <div class="timeline-stage">${item.stage}</div>
                        <div class="timeline-date">${item.date} · ${item.location}</div>
                        <div class="timeline-operator">操作方: ${item.operator}</div>
                        <div class="timeline-details">${item.details}</div>
                    </div>
                `).join('');
            }
            
            // 生成检测项目
            let inspectionItems = '';
            if (trace.inspection && trace.inspection.items && trace.inspection.items.length > 0) {
                inspectionItems = trace.inspection.items.map(item => `
                    <div class="inspection-item">${item}</div>
                `).join('');
            }
            
            const content = `
                <div class="traceability-section">
                    <div class="traceability-section-title">
                        <i class="fas fa-map-marker-alt"></i>
                        原料产地
                    </div>
                    <div class="traceability-info-grid">
                        <div class="traceability-info-item">
                            <div class="traceability-info-label">产地</div>
                            <div class="traceability-info-value">${trace.origin.location}</div>
                        </div>
                        <div class="traceability-info-item">
                            <div class="traceability-info-label">坐标</div>
                            <div class="traceability-info-value">${trace.origin.coordinates}</div>
                        </div>
                        <div class="traceability-info-item">
                            <div class="traceability-info-label">种植方</div>
                            <div class="traceability-info-value">${trace.origin.farmer}</div>
                        </div>
                        <div class="traceability-info-item">
                            <div class="traceability-info-label">种植日期</div>
                            <div class="traceability-info-value">${trace.origin.plantingDate}</div>
                        </div>
                        <div class="traceability-info-item">
                            <div class="traceability-info-label">收获日期</div>
                            <div class="traceability-info-value">${trace.origin.harvestDate}</div>
                        </div>
                    </div>
                </div>
                
                <div class="traceability-section">
                    <div class="traceability-section-title">
                        <i class="fas fa-industry"></i>
                        生产流程
                    </div>
                    <div class="production-timeline">
                        ${productionTimeline}
                    </div>
                </div>
                
                <div class="traceability-section">
                    <div class="traceability-section-title">
                        <i class="fas fa-file-alt"></i>
                        检测报告
                    </div>
                    <div class="inspection-report">
                        <div class="inspection-header">
                            <div class="inspection-agency">
                                <i class="fas fa-building"></i> ${trace.inspection.agency}
                            </div>
                            <div class="inspection-result">
                                <i class="fas fa-check-circle"></i> ${trace.inspection.result}
                            </div>
                        </div>
                        <div style="margin-bottom: 0.8rem; font-size: 0.85rem; color: #666;">
                            报告编号: ${trace.inspection.reportId} · 检测日期: ${trace.inspection.date}
                        </div>
                        <div class="inspection-items">
                            ${inspectionItems}
                        </div>
                    </div>
                </div>
                
                <div class="traceability-section">
                    <div class="traceability-section-title">
                        <i class="fas fa-link"></i>
                        区块链信息
                    </div>
                    <div class="blockchain-info">
                        <div class="blockchain-row">
                            <span class="blockchain-label">区块ID</span>
                            <span class="blockchain-value">${trace.blockchainId}</span>
                        </div>
                        <div class="blockchain-row">
                            <span class="blockchain-label">上链时间</span>
                            <span class="blockchain-value">${trace.timestamp}</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('traceabilityModalContent').innerHTML = content;
            document.getElementById('traceabilityOverlay').classList.add('open');
        }
        
        // 关闭区块链溯源模态框
        function closeTraceability() {
            document.getElementById('traceabilityOverlay').classList.remove('open');
        }
        
        // 获取产品信息的辅助函数
        function getProductById(productId) {
            const allProducts = [...products, ...newProducts, ...hotProducts, ...pointsProducts];
            return allProducts.find(p => p.id === productId);
        }
        
        // 切换收藏状态
        function toggleFavorite(productId, event) {
            event.stopPropagation();
            const index = favorites.indexOf(productId);
            if (index > -1) {
                favorites.splice(index, 1);
                showNotification('❤️ 已取消收藏');
            } else {
                favorites.push(productId);
                showNotification('❤️ 已添加到收藏');
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            renderProducts(currentProducts, currentTabType);
        }
        
        // 搜索商品
        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            if (!searchTerm) {
                renderProducts(currentProducts, currentTabType);
                return;
            }
            
            const allProducts = [...products, ...newProducts, ...hotProducts, ...pointsProducts];
            const searchResults = allProducts.filter(product => 
                product.name.toLowerCase().includes(searchTerm)
            );
            
            if (searchResults.length === 0) {
                showNotification('❌ 未找到相关商品');
            } else {
                showNotification(`✅ 找到 ${searchResults.length} 个商品`);
            }
            
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            searchResults.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                
                const isFavorited = favorites.includes(product.id);
                let cardContent = `
                    <div class="product-badge">搜索结果</div>
                    <button class="favorite-btn ${isFavorited ? 'favorited' : ''}" onclick="toggleFavorite(${product.id}, event)">
                        <i class="${isFavorited ? 'fas' : 'far'} fa-heart"></i>
                    </button>
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhmOWZhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=='">
                    </div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                `;
                
                if (product.price > 0) {
                    cardContent += `<div class="product-price">¥${product.price.toFixed(2)}</div>`;
                } else {
                    cardContent += `<div class="product-price" style="color: #4ECDC4;">积分兑换</div>`;
                }
                
                cardContent += `
                    <div class="product-points">
                        <i class="fas fa-seedling"></i>
                        购买可获 ${product.points} 碳足迹积分
                    </div>
                `;
                
                // 添加环保指标标签
                if (product.ecoData) {
                    cardContent += `
                        <div class="eco-tags">
                            <span class="eco-tag">${product.ecoData.material}</span>
                            <span class="eco-tag">碳足迹: ${product.ecoData.carbonFootprint}</span>
                        </div>
                    `;
                }
                
                cardContent += `
                    <div class="button-group">
                        <button class="buy-button" onclick="addToCart(${product.id})">
                            <i class="fas fa-cart-plus"></i> 加入购物车
                        </button>
                        <button class="ai-try-button" onclick="aiTryOn(${product.id})">
                            <i class="fas fa-robot"></i> AI试穿
                        </button>
                    </div>
                `;
                
                // 添加环保详情按钮
                if (product.ecoData) {
                    cardContent += `
                        <button class="eco-detail-button" onclick="showEcoDetail(${product.id})">
                            <i class="fas fa-leaf"></i> 查看环保详情
                        </button>
                    `;
                }
                
                cardContent += `
                    </div>
                `;
                
                card.innerHTML = cardContent;
                grid.appendChild(card);
            });
        }
        
        // 处理搜索按键
        function handleSearchKey(event) {
            if (event.key === 'Enter') {
                searchProducts();
            }
        }
        
        // 跳转到旧衣回收页面
        function goToRecycling() {
            window.location.href = 'clothing-recycling.html';
        }
        
        // 显示订单历史
        function showOrderHistory() {
            const contentDiv = document.getElementById('orderHistoryContent');
            
            if (orderHistory.length === 0) {
                contentDiv.innerHTML = `
                    <div class="empty-history">
                        <i class="fas fa-inbox"></i>
                        <p>暂无订单记录</p>
                        <p>快去挑选心仪的环保衣物吧！</p>
                    </div>
                `;
            } else {
                let html = '';
                orderHistory.forEach(order => {
                    let itemsHtml = '';
                    order.items.forEach(item => {
                        itemsHtml += `
                            <div class="order-product-item">
                                <img src="${item.image}" alt="${item.name}" class="order-product-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2YwZjBmMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg=='">
                                <div class="order-product-info">
                                    <div class="order-product-name">${item.name}</div>
                                    <div class="order-product-quantity">× ${item.quantity}</div>
                                </div>
                            </div>
                        `;
                    });
                    
                    html += `
                        <div class="order-item">
                            <div class="order-header">
                                <div class="order-id">订单号: ${order.id}</div>
                                <div class="order-time">${order.timestamp}</div>
                            </div>
                            <div class="order-items-list">
                                ${itemsHtml}
                            </div>
                            <div class="order-footer">
                                <div class="order-points">
                                    <i class="fas fa-seedling"></i>
                                    获得 ${order.pointsEarned} 积分
                                </div>
                                <div class="order-total">
                                    ${order.creditUsed > 0 ? `
                                        <span style="text-decoration: line-through; color: #999; font-size: 0.9rem; margin-right: 0.5rem;">¥${order.total.toFixed(2)}</span>
                                        <span style="color: #ff6b6b; margin-right: 0.5rem;">-¥${order.creditUsed.toFixed(2)}</span>
                                    ` : ''}
                                    实付: <span>¥${order.actualTotal.toFixed(2)}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                contentDiv.innerHTML = html;
            }
            
            document.getElementById('orderHistoryOverlay').classList.add('open');
        }
        
        // 关闭订单历史
        function closeOrderHistory() {
            document.getElementById('orderHistoryOverlay').classList.remove('open');
        }
        
        // 显示收藏列表
        function showFavorites() {
            const contentDiv = document.getElementById('favoritesContent');
            
            if (favorites.length === 0) {
                contentDiv.innerHTML = `
                    <div class="empty-history">
                        <i class="far fa-heart"></i>
                        <p>暂无收藏商品</p>
                        <p>点击商品卡片上的爱心添加收藏吧！</p>
                    </div>
                `;
            } else {
                let html = '';
                const allProducts = [...products, ...newProducts, ...hotProducts, ...pointsProducts];
                
                favorites.forEach(productId => {
                    const product = allProducts.find(p => p.id === productId);
                    if (product) {
                        html += `
                            <div class="favorite-item">
                                <img src="${product.image}" alt="${product.name}" class="favorite-item-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2YwZjBmMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZTwvdGV4dD48L3N2Zz4='">
                                <div class="favorite-item-info">
                                    <div class="favorite-item-name">${product.name}</div>
                                    <div class="favorite-item-price">
                                        ${product.price > 0 ? `¥${product.price.toFixed(2)}` : '积分兑换'}
                                    </div>
                                    <div class="favorite-item-actions">
                                        <button class="favorite-action-btn favorite-add-cart" onclick="addToCartFromFavorites(${product.id})">
                                            <i class="fas fa-cart-plus"></i> 加入购物车
                                        </button>
                                        <button class="favorite-action-btn favorite-remove" onclick="removeFavorite(${product.id})">
                                            <i class="fas fa-trash"></i> 取消收藏
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                });
                contentDiv.innerHTML = html;
            }
            
            document.getElementById('favoritesOverlay').classList.add('open');
        }
        
        // 从收藏列表添加到购物车
        function addToCartFromFavorites(productId) {
            addToCart(productId);
            closeFavorites();
        }
        
        // 移除收藏
        function removeFavorite(productId) {
            const index = favorites.indexOf(productId);
            if (index > -1) {
                favorites.splice(index, 1);
                localStorage.setItem('favorites', JSON.stringify(favorites));
                showNotification('❤️ 已取消收藏');
                showFavorites();
                renderProducts(currentProducts, currentTabType);
            }
        }
        
        // 分类筛选
        function filterByCategory(category, btn) {
            currentCategory = category;
            
            // 更新按钮状态
            document.querySelectorAll('.filter-buttons .filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // 重新渲染产品
            let productSource;
            switch(currentTabType) {
                case 'recommend':
                    productSource = products;
                    break;
                case 'new':
                    productSource = newProducts;
                    break;
                case 'hot':
                    productSource = hotProducts;
                    break;
                case 'points':
                    productSource = pointsProducts;
                    break;
                default:
                    productSource = products;
            }
            renderProducts(productSource, currentTabType);
        }
        
        // 价格筛选
        function filterByPrice() {
            const minInput = document.getElementById('priceMin');
            const maxInput = document.getElementById('priceMax');
            
            priceMin = minInput.value ? parseFloat(minInput.value) : null;
            priceMax = maxInput.value ? parseFloat(maxInput.value) : null;
            
            // 重新渲染产品
            let productSource;
            switch(currentTabType) {
                case 'recommend':
                    productSource = products;
                    break;
                case 'new':
                    productSource = newProducts;
                    break;
                case 'hot':
                    productSource = hotProducts;
                    break;
                case 'points':
                    productSource = pointsProducts;
                    break;
                default:
                    productSource = products;
            }
            renderProducts(productSource, currentTabType);
            showNotification('价格筛选已应用');
        }
        
        // 重置价格筛选
        function resetPriceFilter() {
            document.getElementById('priceMin').value = '';
            document.getElementById('priceMax').value = '';
            priceMin = null;
            priceMax = null;
            
            // 重新渲染产品
            let productSource;
            switch(currentTabType) {
                case 'recommend':
                    productSource = products;
                    break;
                case 'new':
                    productSource = newProducts;
                    break;
                case 'hot':
                    productSource = hotProducts;
                    break;
                case 'points':
                    productSource = pointsProducts;
                    break;
                default:
                    productSource = products;
            }
            renderProducts(productSource, currentTabType);
            showNotification('价格筛选已重置');
        }
        
        // 排序产品
        function sortProducts() {
            currentSort = document.getElementById('sortSelect').value;
            
            // 重新渲染产品
            let productSource;
            switch(currentTabType) {
                case 'recommend':
                    productSource = products;
                    break;
                case 'new':
                    productSource = newProducts;
                    break;
                case 'hot':
                    productSource = hotProducts;
                    break;
                case 'points':
                    productSource = pointsProducts;
                    break;
                default:
                    productSource = products;
            }
            renderProducts(productSource, currentTabType);
        }
        
        // 显示产品详情
        function showProductDetail(productId) {
            const product = getProductById(productId);
            if (!product) {
                showNotification('❌ 产品不存在');
                return;
            }
            
            selectedProduct = product;
            selectedSize = product.sizes ? product.sizes[0] : null;
            selectedColor = product.colors ? product.colors[0] : null;
            selectedQuantity = 1;
            
            renderProductDetail();
            document.getElementById('productDetailOverlay').classList.add('open');
        }
        
        // 渲染产品详情
        function renderProductDetail() {
            const product = selectedProduct;
            if (!product) return;
            
            let stockClass = 'in-stock';
            let stockText = `库存充足 (${product.stock}件)`;
            if (product.stock === 0) {
                stockClass = 'out-of-stock';
                stockText = '缺货';
            } else if (product.stock <= 10) {
                stockClass = 'low-stock';
                stockText = `库存紧张 (仅剩${product.stock}件)`;
            }
            
            let sizeOptionsHtml = '';
            if (product.sizes) {
                sizeOptionsHtml = product.sizes.map((size, index) => `
                    <button class="size-option ${selectedSize === size ? 'selected' : ''}" onclick="selectSize('${size}', this)">
                        ${size}
                    </button>
                `).join('');
            }
            
            let colorOptionsHtml = '';
            if (product.colors && product.colorNames) {
                colorOptionsHtml = product.colors.map((color, index) => `
                    <button class="color-option ${selectedColor === color ? 'selected' : ''}" 
                            style="background-color: ${color};"
                            onclick="selectColor('${color}', this)"
                            title="${product.colorNames[index]}">
                    </button>
                `).join('');
            }
            
            const content = `
                <div class="product-detail-main">
                    <div class="product-detail-image">
                        <img src="${product.image}" alt="${product.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhmOWZhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iSW1hZ2UgRXJyb3I8L3RleHQ+PC9zdmc+'">
                    </div>
                    <div class="product-detail-info">
                        <h1 class="product-detail-title">${product.name}</h1>
                        <div class="product-detail-price">¥${product.price.toFixed(2)}</div>
                        <div class="product-detail-points">
                            <i class="fas fa-seedling"></i> 购买可获 ${product.points} 碳足迹积分
                        </div>
                        
                        <div class="stock-info ${stockClass}">
                            <i class="fas fa-box"></i> ${stockText}
                        </div>
                        
                        ${product.sizes ? `
                        <div>
                            <div class="detail-section-title">尺码选择</div>
                            <div class="size-options">${sizeOptionsHtml}</div>
                        </div>
                        ` : ''}
                        
                        ${product.colors ? `
                        <div>
                            <div class="detail-section-title">颜色选择</div>
                            <div class="color-options">${colorOptionsHtml}</div>
                        </div>
                        ` : ''}
                        
                        <div>
                            <div class="detail-section-title">购买数量</div>
                            <div class="quantity-selector">
                                <button onclick="updateDetailQuantity(-1)">-</button>
                                <input type="number" value="${selectedQuantity}" min="1" max="${product.stock}" onchange="setDetailQuantity(this.value)">
                                <button onclick="updateDetailQuantity(1)">+</button>
                            </div>
                        </div>
                        
                        <div class="detail-action-buttons">
                            <button class="add-cart-detail" onclick="addToCartFromDetail()" ${product.stock === 0 ? 'disabled style="opacity:0.5;cursor:not-allowed;"' : ''}>
                                <i class="fas fa-cart-plus"></i> 加入购物车
                            </button>
                            <button class="buy-now-detail" onclick="buyNowFromDetail()" ${product.stock === 0 ? 'disabled style="opacity:0.5;cursor:not-allowed;"' : ''}>
                                <i class="fas fa-shopping-bag"></i> 立即购买
                            </button>
                        </div>
                    </div>
                </div>
                
                ${product.ecoData ? `
                <div class="product-description">
                    <h3 class="detail-section-title"><i class="fas fa-leaf"></i> 环保详情</h3>
                    <p><strong>原料成分：</strong>${product.ecoData.material}</p>
                    <p><strong>碳足迹：</strong>${product.ecoData.carbonFootprint}</p>
                    <p><strong>降解周期：</strong>${product.ecoData.degradationCycle}</p>
                    <p><strong>生产工艺：</strong>${product.ecoData.craft}</p>
                    ${product.ecoData.certifications ? `<p><strong>环保认证：</strong>${product.ecoData.certifications.join('、')}</p>` : ''}
                </div>
                ` : ''}
            `;
            
            document.getElementById('productDetailContent').innerHTML = content;
        }
        
        // 选择尺码
        function selectSize(size, btn) {
            selectedSize = size;
            document.querySelectorAll('.size-option').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }
        
        // 选择颜色
        function selectColor(color, btn) {
            selectedColor = color;
            document.querySelectorAll('.color-option').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }
        
        // 更新数量
        function updateDetailQuantity(delta) {
            const newQty = selectedQuantity + delta;
            if (newQty >= 1 && newQty <= selectedProduct.stock) {
                selectedQuantity = newQty;
                renderProductDetail();
            }
        }
        
        // 设置数量
        function setDetailQuantity(value) {
            const qty = parseInt(value);
            if (qty >= 1 && qty <= selectedProduct.stock) {
                selectedQuantity = qty;
            }
        }
        
        // 从详情页添加到购物车
        function addToCartFromDetail() {
            if (!selectedProduct || selectedProduct.stock === 0) return;
            
            for (let i = 0; i < selectedQuantity; i++) {
                addToCart(selectedProduct.id);
            }
            closeProductDetail();
        }
        
        // 从详情页立即购买
        function buyNowFromDetail() {
            if (!selectedProduct || selectedProduct.stock === 0) return;
            
            for (let i = 0; i < selectedQuantity; i++) {
                addToCart(selectedProduct.id);
            }
            closeProductDetail();
            openCartModal();
        }
        
        // 关闭产品详情
        function closeProductDetail() {
            document.getElementById('productDetailOverlay').classList.remove('open');
        }
        
        // 关闭收藏列表
        function closeFavorites() {
            document.getElementById('favoritesOverlay').classList.remove('open');
        }
        
        window.onload = function() {
            renderProducts();
            updatePointsDisplay();
            
            // 添加标签页切换功能
            const tabItems = document.querySelectorAll('.tab-item');
            tabItems.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabItems.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 重置筛选条件
                    currentCategory = 'all';
                    priceMin = null;
                    priceMax = null;
                    currentSort = 'default';
                    document.getElementById('priceMin').value = '';
                    document.getElementById('priceMax').value = '';
                    document.getElementById('sortSelect').value = 'default';
                    document.querySelectorAll('.filter-buttons .filter-btn').forEach((btn, idx) => {
                        btn.classList.toggle('active', idx === 0);
                    });
                    
                    // 根据标签页显示不同的产品
                    const tabIndex = Array.from(tabItems).indexOf(this);
                    switch(tabIndex) {
                        case 0: // 推荐商品
                            renderProducts(products, 'recommend');
                            break;
                        case 1: // 新品上架
                            renderProducts(newProducts, 'new');
                            break;
                        case 2: // 热销榜单
                            renderProducts(hotProducts, 'hot');
                            break;
                        case 3: // 积分专区
                            renderProducts(pointsProducts, 'points');
                            break;
                    }
                });
            });
            
            // 添加事件监听器
            document.getElementById('cartIcon').addEventListener('click', openCartModal);
            document.getElementById('floatingCart').addEventListener('click', openCartModal);
            document.getElementById('closeCart').addEventListener('click', closeCartModal);
            
            // 点击模态框外部关闭
            document.getElementById('cartModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeCartModal();
                }
            });
            
            document.getElementById('ecoModalOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeEcoModal();
                }
            });
            
            document.getElementById('orderHistoryOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeOrderHistory();
                }
            });
            
            document.getElementById('favoritesOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeFavorites();
                }
            });
            
            document.getElementById('traceabilityOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeTraceability();
                }
            });
            
            document.getElementById('productDetailOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeProductDetail();
                }
            });
        };
    </script>
</body>
</html>
